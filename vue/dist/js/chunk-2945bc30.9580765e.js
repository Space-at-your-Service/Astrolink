(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2945bc30"],{3959:function(t,e,a){},8530:function(t,e,a){"use strict";var i=a("d4ec"),n=a("bee2"),r=function(){function t(){Object(i["a"])(this,t)}return Object(n["a"])(t,[{key:"toastSuccess",value:function(t,e,a){return t.$bvToast.toast(a,{title:e,variant:"success",solid:!0})}},{key:"toastInfo",value:function(t,e,a){return t.$bvToast.toast(a,{title:e,variant:"info",solid:!0})}},{key:"toastWarning",value:function(t,e,a){return t.$bvToast.toast(a,{title:e,variant:"warning",solid:!0})}},{key:"toastError",value:function(t,e,a){return t.$bvToast.toast(a,{title:e,variant:"danger",solid:!0})}}]),t}();e["a"]=new r},9577:function(t,e,a){"use strict";var i=a("3959"),n=a.n(i);n.a},e25f:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-container"},[a("h3",{staticClass:"section-title"},[t._v("Inventory")]),a("b-container",{staticClass:"p-0",attrs:{fluid:""}},[a("b-row",{staticClass:"my-3",attrs:{"no-gutters":""}},[a("b-col",[t.isAllowed("inventory.add_item")?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.createModal",modifiers:{createModal:!0}}],staticClass:"float-left",staticStyle:{"border-radius":"15px"},attrs:{size:"lg",variant:"info"}},[a("b-icon",{staticClass:"mr-1",attrs:{icon:"plus-circle-fill"}}),t._v(" New item ")],1):t._e()],1),a("b-col",[a("b-form-checkbox",{staticClass:"mt-2",attrs:{id:"hideEmptyInput",switch:"",size:"lg"},model:{value:t.hideEmpty,callback:function(e){t.hideEmpty=e},expression:"hideEmpty"}},[t._v(" Hide empty items ")])],1),a("b-col",[a("b-icon",{staticClass:"h3 float-right mt-2 mr-2",attrs:{icon:"search"}})],1),a("b-col",{attrs:{cols:"3"}},[a("b-input-group",{staticClass:"mt-1"},[a("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to search . . ."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1)],1),a("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.items.length,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),a("b-overlay",{attrs:{show:t.isBusy,variant:"white","spinner-variant":"primary","spinner-type":"grow",rounded:"sm"}},[a("b-table",{ref:"inventory",attrs:{id:"inventory","primary-key":"id",items:t.items,fields:t.fields,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"current-page":t.currentPage,"per-page":t.perPage,busy:t.isBusy,fixed:"",hover:"",striped:"",bordered:"","head-variant":"dark","table-variant":"light","tbody-tr-class":t.rowClass,"tbody-transition-props":t.transProps},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"cell(quantity)",fn:function(e){return[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[t._v(" "+t._s(e.item.quantity)+" ")]),a("div",{staticClass:"col"},[a("b-button-group",{staticClass:"float-right"},[0==e.item.quantity?a("b-badge",{staticClass:"m-auto",attrs:{variant:"danger"}},[t._v("empty")]):t._e(),e.item.quantity>0&&t.isAllowed("inventory.modify_item_qty")?a("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:""},on:{click:function(a){return t.decrementItem(e.item)}}},[a("b-icon",{attrs:{icon:"dash"}})],1):t._e(),t.isAllowed("inventory.modify_item_qty")?a("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:""},on:{click:function(a){return t.incrementItem(e.item)}}},[a("b-icon",{attrs:{icon:"plus"}})],1):t._e()],1)],1)])])]}},{key:"cell(details)",fn:function(e){return[a("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:""},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" ")])]}},{key:"row-details",fn:function(e){return[a("div",{staticClass:"container p-0 "},[a("div",{staticClass:"row justify-content-between"},[a("div",{staticClass:"col"},[a("b",{staticClass:"text-info"},[t._v(t._s(e.item.details))])]),a("div",{staticClass:"col-1"},[a("b-button-group",{staticClass:"float-right"},[t.isAllowed("inventory.change_item")?a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.editModal",modifiers:{editModal:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:function(a){return t.editModal(e.item)}}},[a("b-icon",{attrs:{icon:"pencil-square"}})],1):t._e(),t.isAllowed("inventory.delete_item")?a("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"danger"},on:{click:function(a){return t.deleteItem(e.item)}}},[a("b-icon",{attrs:{icon:"trash"}})],1):t._e()],1)],1)])])]}},{key:"table-colgroup",fn:function(e){return t._l(e.fields,(function(t){return a("col",{key:t.key,style:{width:"name"!==t.key?"80px":"180px"}})}))}},{key:"table-busy",fn:function(){return[a("div",{staticClass:"text-center text-info my-2"},[a("b-spinner",{staticClass:"align-middle",attrs:{type:"grow"}}),a("strong",[t._v("Loading...")])],1)]},proxy:!0}])})],1),a("b-modal",{attrs:{id:"createModal",title:"New item",centered:""},on:{ok:function(e){return e.preventDefault(),t.okCreate(e)},hidden:t.resetCreatedItem}},[a("form",[a("b-form-group",{attrs:{label:"Item ID","label-for":"createdIdInput","invalid-feedback":t.invalidIdFeedback(),state:t.checkId(t.createdItem)}},[a("b-form-input",{attrs:{id:"createdIdInput",formatter:t.idFormatter},model:{value:t.createdItem.id,callback:function(e){t.$set(t.createdItem,"id",e)},expression:"createdItem.id"}})],1),a("b-form-group",{attrs:{label:"Name","label-for":"createdNameInput","invalid-feedback":t.invalidNameFeedback(),state:t.checkName(t.createdItem)}},[a("b-form-input",{attrs:{id:"createdNameInput",trim:""},model:{value:t.createdItem.name,callback:function(e){t.$set(t.createdItem,"name",e)},expression:"createdItem.name"}})],1),a("b-form-group",{attrs:{label:"Quantity","label-for":"createdQuantityInput","invalid-feedback":t.invalidQuantityFeedback(),state:t.checkQuantity(t.createdItem)}},[a("b-form-input",{attrs:{id:"createdQuantityInput",type:"number",min:"0"},model:{value:t.createdItem.quantity,callback:function(e){t.$set(t.createdItem,"quantity",e)},expression:"createdItem.quantity"}})],1),a("b-form-group",{attrs:{label:"Details","label-for":"createdDetailsInput","invalid-feedback":t.invalidDetailsFeedback(),state:t.checkDetails(t.createdItem)}},[a("b-form-textarea",{attrs:{id:"createdDetailsInput",size:"sm","no-resize":""},model:{value:t.createdItem.details,callback:function(e){t.$set(t.createdItem,"details",e)},expression:"createdItem.details"}})],1)],1)]),a("b-modal",{attrs:{id:"editModal",title:t.editedItem.id,centered:""},on:{ok:function(e){return e.preventDefault(),t.okEdit(e)}}},[a("form",[a("b-form-group",{attrs:{label:"Name","label-for":"editedNameInput","invalid-feedback":t.invalidNameFeedback(),state:t.checkName(t.editedItem)}},[a("b-form-input",{attrs:{id:"editedNameInput",trim:""},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),a("b-form-group",{attrs:{label:"Quantity","label-for":"editedQuantityInput","invalid-feedback":t.invalidQuantityFeedback(),state:t.checkQuantity(t.editedItem)}},[a("b-form-input",{attrs:{id:"editedQuantityInput",type:"number",min:"0"},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}})],1),a("b-form-group",{attrs:{label:"Details","invalid-feedback":t.invalidDetailsFeedback(),state:t.checkDetails(t.editedItem)}},[a("b-form-textarea",{attrs:{id:"editedDetailsInput",size:"sm","no-resize":""},model:{value:t.editedItem.details,callback:function(e){t.$set(t.editedItem,"details",e)},expression:"editedItem.details"}})],1)],1)])],1)},n=[],r=(a("4de4"),a("d81d"),a("fb6a"),a("b0c0"),a("96cf"),a("1da1")),s=a("5530"),c=a("2f62"),o=a("8530"),d={data:function(){return{fields:[{key:"id",label:"Item ID",sortable:!0,sortDirection:"desc"},{key:"name",label:"Name",sortable:!0},{key:"quantity",label:"Quantity",sortable:!1},{key:"details",label:"Details",sortable:!1}],sortBy:"id",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],hideEmpty:!1,transProps:{name:"flip-list"},selected:[],currentPage:1,perPage:10,isBusy:!1,createdItem:{id:"",name:"",details:"",quantity:0},editedItem:{id:"",name:"",details:"",quantity:0}}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(c["d"])("inventory",["items"])),Object(c["c"])("user",["isAllowed"])),{},{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}}),methods:{onRowSelected:function(t){this.selected=t},rowClass:function(t){var e="";return 0==t.quantity&&(e+="table-danger",this.hideEmpty&&(e+=" d-none")),e},incrementItem:function(t){var e=Object(s["a"])({},t);e.quantity++,this.$store.dispatch("inventory/updateItem",e)},decrementItem:function(t){if(t.quantity>0){var e=Object(s["a"])({},t);e.quantity--,this.$store.dispatch("inventory/updateItem",e)}},editModal:function(t){this.editedItem=Object(s["a"])({},t)},idFormatter:function(t){return t.slice(0,5).toUpperCase()},checkId:function(t){return 5==t.id.length},checkName:function(t){return t.name.length>=3&&t.name.length<=20},checkQuantity:function(t){return t.quantity>=0&&t.quantity<=32767},checkDetails:function(t){return t.details.length<=140},checkItem:function(t){return""===t.details?!!(this.checkId(t)&&this.checkName(t)&&this.checkQuantity(t))&&(t.details="No details provided.",!0):this.checkId(t)&&this.checkName(t)&&this.checkQuantity(t)&&this.checkDetails(t)},invalidIdFeedback:function(){return"Input the right ID format."},invalidNameFeedback:function(){return"Min. 3 characters, Max. 20 characters."},invalidQuantityFeedback:function(){return"Min. 0, Max. 32767."},invalidDetailsFeedback:function(){return"Max. 140 characters."},resetCreatedItem:function(){this.createdItem.id="",this.createdItem.name="",this.createdItem.quantity=0,this.createdItem.details=""},okCreate:function(){this.checkItem(this.createdItem)&&this.confirmCreate(this.createdItem)},okEdit:function(){this.checkItem(this.editedItem)&&this.confirmEdit(this.editedItem)},confirmCreate:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$store.dispatch("inventory/createItem",t).then((function(){e.$bvModal.hide("createModal"),o["a"].toastSuccess(e,"Item created","The item has been successfully created.")})).catch((function(){o["a"].toastError(e,"Could not create","Could not create the item.")}));case 1:case"end":return a.stop()}}),a)})))()},confirmEdit:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$store.dispatch("inventory/updateItem",t).then((function(){e.$bvModal.hide("editModal"),o["a"].toastSuccess(e,"Item updated","The item has been successfully updated.")})).catch((function(){o["a"].toastError(e,"Could not update","Could not update the item.")}));case 1:case"end":return a.stop()}}),a)})))()},deleteItem:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.$store.dispatch("inventory/deleteItem",t).then((function(){o["a"].toastSuccess(e,"Item updated","The item has been successfully deleted.")})).catch((function(){o["a"].toastError(e,"Could not delete","Could not delete the item.")}));case 1:case"end":return a.stop()}}),a)})))()},reloadInventory:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.isBusy=!0,t.$store.dispatch("inventory/getInventoryState").catch((function(){o["a"].toastError(t,"Loading error","An error has occured during loading.")})).then((function(){t.refreshTable(),t.isBusy=!1}));case 2:case"end":return e.stop()}}),e)})))()},refreshTable:function(){this.$refs.inventory.refresh()}}},l=d,u=(a("9577"),a("2877")),m=Object(u["a"])(l,i,n,!1,null,null,null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2945bc30.9580765e.js.map