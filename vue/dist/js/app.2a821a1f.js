(function(e){function t(t){for(var i,a,o=t[0],c=t[1],u=t[2],d=0,l=[];d<o.length;d++)a=o[d],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&l.push(s[a][0]),s[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);p&&p(t);while(l.length)l.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(i=!1)}i&&(r.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},a={app:0},s={app:0},r=[];function o(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-168090aa":"e88dce2b","chunk-2d0b1c72":"2f25ec50","chunk-2d0b97cb":"eec824f3","chunk-2d0e24e5":"c4b71a17","chunk-37baa40d":"0df80b00","chunk-4216ad62":"008fc0e2","chunk-43acd18f":"8fc62fd4","chunk-5fb4fb74":"18ba5017","chunk-61162857":"0e156dc3","chunk-86c9c238":"b3043e56","chunk-ba4ca246":"e6490707","chunk-d94d8ba4":"e6b12025"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-168090aa":1,"chunk-4216ad62":1,"chunk-43acd18f":1,"chunk-5fb4fb74":1,"chunk-61162857":1,"chunk-86c9c238":1,"chunk-ba4ca246":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-168090aa":"7dcc4d25","chunk-2d0b1c72":"31d6cfe0","chunk-2d0b97cb":"31d6cfe0","chunk-2d0e24e5":"31d6cfe0","chunk-37baa40d":"31d6cfe0","chunk-4216ad62":"b95eb078","chunk-43acd18f":"9188ed62","chunk-5fb4fb74":"d226f693","chunk-61162857":"9879eb70","chunk-86c9c238":"c01075d4","chunk-ba4ca246":"c491bc1e","chunk-d94d8ba4":"31d6cfe0"}[e]+".css",s=c.p+i,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var u=r[o],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===i||d===s))return t()}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){u=l[o],d=u.getAttribute("data-href");if(d===i||d===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=i,delete a[e],p.parentNode.removeChild(p),n(r)},p.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(p)})).then((function(){a[e]=0})));var i=s[e];if(0!==i)if(i)t.push(i[2]);else{var r=new Promise((function(t,n){i=s[e]=[t,n]}));t.push(i[2]=r);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+a+")",l.name="ChunkLoadError",l.type=i,l.request=a,n[1](l)}s[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=d;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),a=n.n(i);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App"},[this.$store.state.auth.status.loggedIn?n("Nav"):e._e(),n("router-view")],1)},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{staticClass:"bg-white",attrs:{toggleable:"lg"}},[n("b-navbar-brand",{attrs:{href:"https://asclepios.ch/",target:"_blank"}}),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-text",[e._v("Alpha Version 0.2")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{class:{active:"home"===e.isActive},attrs:{to:"/home"},on:{click:function(t){e.isActive="home"}}},[e._v("Planning")]),e.permissions.includes("activities.view_procedure")?n("b-nav-item",{class:{active:"procedures"===e.isActive},attrs:{to:"/procedures"},on:{click:function(t){e.isActive="procedures"}}},[e._v("Procedures")]):e._e(),n("b-nav-item",{class:{active:"experiments"===e.isActive},attrs:{to:"/experiments"},on:{click:function(t){e.isActive="experiments"}}},[e._v("Experiments")]),e.permissions.includes("inventory.view_item")?n("b-nav-item",{class:{active:"inventory"===e.isActive},attrs:{to:"/inventory"},on:{click:function(t){e.isActive="inventory"}}},[e._v("Inventory")]):e._e(),n("b-nav-item",{class:{active:"psyforms"===e.isActive},attrs:{to:"/psyforms"},on:{click:function(t){e.isActive="psyforms"}}},[e._v("Psychological")]),n("b-nav-item-dropdown",{staticClass:"ml-lg-5",attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[e._v(" "+e._s(e.username)+" ")]},proxy:!0}])},[n("b-dropdown-item",{staticClass:"text-center",attrs:{to:"/profile"},on:{click:function(t){e.isActive="profile"}}},[n("b-icon",{attrs:{icon:"person-circle"}}),e._v(" "),n("strong",[e._v("Profile")])],1),n("b-dropdown-item",{staticClass:"text-center",on:{click:e.handleLogout}},[n("b-icon",{attrs:{icon:"box-arrow-left"}}),e._v(" "),n("strong",[e._v("Log Out")])],1)],1)],1)],1)],1)],1)},o=[],c=n("5530"),u=n("2f62"),d={data:function(){return{isActive:""}},computed:Object(c["a"])({},Object(u["d"])("user",["permissions","username"])),methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(u["b"])("auth",["logout"])),Object(u["b"])("user",["getUserState"])),{},{handleLogout:function(){this.logout().then(this.$router.push("/login"))}}),created:function(){this.getUserState()}},l=d,p=(n("9a61"),n("2877")),h=Object(p["a"])(l,r,o,!1,null,"9598d262",null),m=h.exports,f={name:"app",components:{Nav:m}},b=f,g=(n("034f"),Object(p["a"])(b,a,s,!1,null,null,null)),v=g.exports,y=(n("caad"),n("d3b7"),n("8c4f")),k=n("d4ec"),x=n("bee2"),T=n("d929"),_=n("bc3a"),S=n.n(_),w=function(){function e(){Object(k["a"])(this,e)}return Object(x["a"])(e,[{key:"login",value:function(e){return T["a"].post("/login/",{username:e.username,password:e.password}).then((function(e){var t=e.data.token;return t&&(localStorage.setItem("token",t),S.a.defaults.headers.common["Authorization"]="Token "+t),e.data}))}},{key:"logout",value:function(){localStorage.removeItem("token")}},{key:"register",value:function(e){return T["a"].post("/signup/",{username:e.username,firstName:e.firstName,lastName:e.lastName,role:e.role,password:e.password})}}]),e}(),A=new w,E=localStorage.getItem("token"),O=E?{status:{loggedIn:!0}}:{status:{loggedIn:!1}},P={namespaced:!0,state:O,mutations:{loginSuccess:function(e){e.status.loggedIn=!0},logout:function(e){e.status.loggedIn=!1},registerSuccess:function(){}},actions:{login:function(e,t){var n=e.commit;return A.login(t).then((function(e){return n("loginSuccess"),Promise.resolve(e)}),(function(e){return alert("login failed"),Promise.reject(e)}))},logout:function(e){var t=e.commit;A.logout(),t("logout")},register:function(e,t){var n=e.commit;return A.register(t).then((function(e){return n("registerSuccess"),Promise.resolve(e.data)}),(function(e){return alert("register failed"),Promise.reject(e)}))}}},j=function(){function e(){Object(k["a"])(this,e)}return Object(x["a"])(e,[{key:"getUserProfile",value:function(){return T["a"].get("/asclepios/profile/")}},{key:"getPermissionLexicon",value:function(){return T["a"].get("/asclepios/profile/permissions_lexicon/")}}]),e}(),C=new j,L={namespaced:!0,state:{username:"",firstName:"",lastName:"",groups:[],permissions:[],favProcedures:[],planning:[]},getters:{username:function(e){return e.username}},mutations:{SET_USER:function(e,t){e.username=t.username,e.firstName=t.first_name,e.lastName=t.last_name,e.groups=t.groups,e.permissions=t.permissions}},actions:{getUserState:function(e){var t=e.commit;C.getUserProfile().then((function(e){t("SET_USER",e.data)}))}}},M=n("ef06");i["default"].use(u["a"]);var N=new u["a"].Store({modules:{auth:P,user:L},state:{missionStartDate:new Date(2021,4,15,0,0,0),experiments:[{index:0,title:"Experiment 1",state:"complete",supervisor:"John",img:"../assets/bluenova.jpg",infoShort:"This describes the experiment in one sentence.",info:"This is a detailed description.This is a more detailed description.This is a more detailed description.This is a more detailed description.",protocol:"../assets/logo.png",textsheets:[new M["a"]("First Datasheet","This is a placeholder content. Should be replaced with some data.")]},{index:1,title:"experiment2",state:"aborted",supervisor:"Mary",infoShort:"This describes the experiment in one sentence.",info:"The detailed description.",protocol:"../assets/logo.png",datasheets:[]},{index:2,title:"experiment3",state:"planned",supervisor:"Bill",infoShort:"This describes the experiment in one sentence.",info:"This is a more detailed description.This is a more detailed description.This is a more detailed description.This is a more detailed description.This is a more detailed description.",protocol:"../assets/logo.png",datasheets:[]},{index:3,title:"Experiment 1",state:"complete",supervisor:"John",img:"../assets/bluenova.jpg",infoShort:"This describes the experiment in one sentence.",info:"This is a more detailed description.This is a more detailed description.This is a more detailed description.This is a more detailed description.This is a more detailed description.",protocol:"../assets/logo.png",textsheets:[new M["a"]("First Datasheet","This is a placeholder content. Should be replaced with some data.")]},{index:4,title:"experiment2",state:"aborted",supervisor:"Mary",infoShort:"This describes the experiment in one sentence.",info:"This is a more detailed description.This is a more detailed description.This is a more detailed description.This is a more detailed description.This is a more detailed description.",protocol:"../assets/logo.png",datasheets:[]},{index:5,title:"experiment3",state:"planned",supervisor:"Bill",infoShort:"This describes the experiment in one sentence.",info:"This is a more detailed description.This iscription.This is a more detailed description.This is a more detailed description.This is a more detailed description.",protocol:"../assets/logo.png",datasheets:[]}],procedureTypes:[{primaryType:"General",subtypes:["Systems","Hygiene","Cooking","Routine maintenance","Special maintenance"]},{primaryType:"Science",subtypes:["Rover","Space suits","Georemap/App-EVA","Geophysical Exploration","Hydration","MAS","REDMARS","Bioplastic","Crans Psychology","IDUN","Psychology-NASA","Psychology-Mission","Psychology-Design base"]},{primaryType:"MCC",subtypes:["Main"]},{primaryType:"Emergencies",subtypes:["Main"]},{primaryType:"Others",subtypes:["Main"]}],proceduresList:[{nick:"mas-lunar-base-evacuation",title:"MAS Lunar Base Evacuation",type:"Logistics",abstract:"Aims as achieving this and this by doing this. The expected results are this and that.",path:"C:/Users/Valentin/Documents/EPFL/Cours M3/Projet Astrolink/Astrolink/vue/public/lib/procedures/2020_SC_SOP_0001_MAS_Lunar_Base_Evacuation.docx.pdf"},{nick:"geophysical-experiment",title:"Geophysical Experiment",type:"Logistics",abstract:"Aims as achieving this and this by doing this. The expected results are this and that.",path:"../../public/lib/procedures/2021_GE_SOP_Geophysical_experiment.docx.pdf"},{nick:"georemap",title:"GeoReMap",type:"Logistics",abstract:"Aims as achieving this and this by doing this. The expected results are this and that.",path:"../../public/lib/procedures/2021_GE_SOP_GeoReMap.docx.pdf"},{nick:"hydration",title:"Hydration",type:"Logistics",abstract:"Aims as achieving this and this by doing this. The expected results are this and that.",path:"../../public/lib/procedures/2021_GE_SOP_Hydration.docx.pdf"},{nick:"lexicon",title:"Lexicon",type:"Contacts",abstract:"Aims as achieving this and this by doing this. The expected results are this and that.",path:"../../public/lib/procedures/2021_GE_SOP_LEXICON_Experiment.docx.pdf"},{nick:"redmars",title:"RedMars",type:"Contacts",abstract:"Aims as achieving this and this by doing this. The expected results are this and that.",path:"../../public/lib/procedures/RedMars_SOP.docx.pdf"}]},getters:{missionDayNumber:function(e){var t=new Date;return Math.floor((t.getTime()-e.missionStartDate.getTime())/864e5)}},mutations:{},actions:{}}),D=N;i["default"].use(y["a"]);var I=function(e,t,n){var i=D.state.auth.status.loggedIn;i?n("/profile"):n()},U=[{path:"*",name:"404notfound",component:function(){return n.e("chunk-2d0e24e5").then(n.bind(null,"7dac"))}},{path:"/login",alias:"/",name:"login",beforeEnter:I,component:function(){return n.e("chunk-43acd18f").then(n.bind(null,"a55b"))}},{path:"/signup",name:"signup",beforeEnter:I,component:function(){return n.e("chunk-37baa40d").then(n.bind(null,"34c3"))}},{path:"/home",name:"home",component:function(){return n.e("chunk-168090aa").then(n.bind(null,"bb51"))}},{path:"/procedures",name:"procedures",component:function(){return n.e("chunk-d94d8ba4").then(n.bind(null,"2ac9"))}},{path:"/experiments",name:"experiments",component:function(){return n.e("chunk-2d0b97cb").then(n.bind(null,"32c9"))}},{path:"/experiments/:experimentTitle",name:"experiment_details",props:!0,component:function(){return n.e("chunk-5fb4fb74").then(n.bind(null,"1330"))}},{path:"/inventory",name:"inventory",component:function(){return n.e("chunk-ba4ca246").then(n.bind(null,"e25f"))}},{path:"/psyforms",name:"psyforms",component:function(){return n.e("chunk-61162857").then(n.bind(null,"29ed"))}},{path:"/communication",name:"communication",component:function(){return n.e("chunk-2d0b1c72").then(n.bind(null,"20fd"))}},{path:"/experiments/:experimentTitle/newtextdata",name:"experiment_textdata",props:!0,component:function(){return n.e("chunk-86c9c238").then(n.bind(null,"1bc7"))}},{path:"/profile",name:"profile",props:!0,component:function(){return n.e("chunk-4216ad62").then(n.bind(null,"c66d"))}}],G=new y["a"]({mode:"history",base:"/",routes:U}),R=["/login","/signup"];G.beforeEach((function(e,t,n){var i=!R.includes(e.path),a=D.state.auth.status.loggedIn;i&&!a?n("/login"):n()}));var B=G,H=(n("5aea"),n("ab8b"),n("2dd8"),n("5f5b")),$=n("b1e0"),F=n("7bb1");i["default"].use(H["a"]),i["default"].use($["a"]),i["default"].use(F["a"]),i["default"].config.productionTip=!1,new i["default"]({router:B,store:D,render:function(e){return e(v)}}).$mount("#app")},"5aea":function(e,t,n){},"85ec":function(e,t,n){},"9a61":function(e,t,n){"use strict";var i=n("9fe7"),a=n.n(i);a.a},"9fe7":function(e,t,n){},d929:function(e,t,n){"use strict";var i=n("bc3a"),a=n.n(i),s=localStorage.getItem("token");s&&(a.a.defaults.headers.common["Authorization"]="Token "+s),t["a"]=a.a.create({baseURL:"http://localhost:8000"})},ef06:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("d4ec"),a=function(){var e=new Date,t={year:"numeric",month:"numeric",day:"numeric"},n={hour:"2-digit",minute:"2-digit"};return e.toLocaleDateString("en-CH",t)+" at "+e.toLocaleTimeString("en-CH",n)},s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(i["a"])(this,e),this.title=t,this.content=n,this.creator=void 0,this.creationDate=a(),this.lastUser=void 0,this.lastModifiedDate=a()}}});
//# sourceMappingURL=app.2a821a1f.js.map