(function(e){function t(t){for(var a,o,c=t[0],i=t[1],u=t[2],p=0,l=[];p<c.length;p++)o=c[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&l.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);d&&d(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r={app:0},s=[];function c(e){return i.p+"js/"+({}[e]||e)+"."+{"chunk-1d841aa6":"c9c36318","chunk-2d0b1c72":"f0adf193","chunk-2d0d05dc":"87ae45eb","chunk-2d0e24e5":"11e8660c","chunk-43d9bc38":"c416d018","chunk-4d6c7e3b":"48e89710","chunk-51ce975b":"eff7f291","chunk-61162857":"269c98d6","chunk-684c7eec":"04c977fd","chunk-6fedeada":"fab4167a","chunk-9487678a":"4af72121","chunk-c911b424":"94f9827e"}[e]+".js"}function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n={"chunk-1d841aa6":1,"chunk-43d9bc38":1,"chunk-51ce975b":1,"chunk-61162857":1,"chunk-684c7eec":1,"chunk-6fedeada":1,"chunk-9487678a":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({}[e]||e)+"."+{"chunk-1d841aa6":"7dcc4d25","chunk-2d0b1c72":"31d6cfe0","chunk-2d0d05dc":"31d6cfe0","chunk-2d0e24e5":"31d6cfe0","chunk-43d9bc38":"14cb053e","chunk-4d6c7e3b":"31d6cfe0","chunk-51ce975b":"f2344bd9","chunk-61162857":"9879eb70","chunk-684c7eec":"284ea5c6","chunk-6fedeada":"9188ed62","chunk-9487678a":"9e286dff","chunk-c911b424":"31d6cfe0"}[e]+".css",r=i.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var u=s[c],p=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(p===a||p===r))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){u=l[c],p=u.getAttribute("data-href");if(p===a||p===r)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var a=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[e],d.parentNode.removeChild(d),n(s)},d.href=r;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){o[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=s);var u,p=document.createElement("script");p.charset="utf-8",p.timeout=120,i.nc&&p.setAttribute("nonce",i.nc),p.src=c(e);var l=new Error;u=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,n[1](l)}r[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:p})}),12e4);p.onerror=p.onload=u,document.head.appendChild(p)}return Promise.all(t)},i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],p=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=p;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),o=n.n(a);o.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App"},[this.$store.state.auth.status.loggedIn?n("Nav"):e._e(),n("router-view"),n("b-overlay",{attrs:{show:e.overlay.show,"no-wrap":"",fixed:"","spinner-variant":"info"},scopedSlots:e._u([{key:"overlay",fn:function(){return[n("div",{staticClass:"text-center"},[e.overlay.img?n("img",{attrs:{src:e.overlay.img,alt:"[Loading]",width:"50px"}}):e._e(),n("br"),n("br"),e.overlay.msg?n("strong",{staticStyle:{"font-size":"large"}},[e._v(e._s(e.overlay.msg))]):e._e(),n("br"),n("br"),e.overlay.hideSpinner?e._e():n("b-spinner",{attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1)]},proxy:!0}])})],1)},r=[],s=n("5530"),c=n("2f62"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{staticClass:"bg-white",attrs:{toggleable:"lg"}},[n("b-navbar-brand",{attrs:{href:"https://astrolink.earth/",target:"_self"}}),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-text",[e._v("Alpha Version 0.2")])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{class:{active:"flightplan"===e.isActive},attrs:{to:"/flightplan"},on:{click:function(t){e.isActive="flightplan"}}},[e._v("Flightplan")]),e.isAllowed("activities.view_procedure")?n("b-nav-item",{class:{active:"procedures"===e.isActive},attrs:{to:"/procedures"},on:{click:function(t){e.isActive="procedures"}}},[e._v("Procedures")]):e._e(),e.isAllowed("activities.view_experiment")?n("b-nav-item",{class:{active:"experiments"===e.isActive},attrs:{to:"/experiments"},on:{click:function(t){e.isActive="experiments"}}},[e._v("Experiments")]):e._e(),e.isAllowed("inventory.view_item")?n("b-nav-item",{class:{active:"inventory"===e.isActive},attrs:{to:"/inventory"},on:{click:function(t){e.isActive="inventory"}}},[e._v("Inventory")]):e._e(),n("b-nav-item-dropdown",{staticClass:"ml-lg-5",attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[e._v(e._s(e.username))])]},proxy:!0}])},[n("b-dropdown-item",{staticClass:"text-center",attrs:{to:"/profile"},on:{click:function(t){e.isActive="profile"}}},[n("b-icon",{attrs:{icon:"person-circle"}}),e._v(" "),n("strong",[e._v("Profile")])],1),n("b-dropdown-item",{staticClass:"text-center",attrs:{to:"/planning"},on:{click:function(t){e.isActive="planning"}}},[n("b-icon",{attrs:{icon:"calendar-range"}}),e._v(" "),n("strong",[e._v("Planning")])],1),n("b-dropdown-item",{staticClass:"text-center",on:{click:e.handleLogout}},[n("b-icon",{attrs:{icon:"box-arrow-left"}}),e._v(" "),n("strong",[e._v("Log Out")])],1)],1)],1)],1)],1)},u=[],p={data:function(){return{loading:!1,isActive:""}},computed:Object(s["a"])(Object(s["a"])({},Object(c["d"])("user",["username"])),Object(c["c"])("user",["isAllowed"])),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(c["b"])(["loadAll","displayOverlay","hideOverlay"])),Object(c["b"])("auth",["logout"])),Object(c["b"])("user",["getUserState"])),{},{handleLogout:function(){this.logout().then(this.$router.push("/login"))}}),mounted:function(){this.$store.dispatch("loadAll")}},l=p,d=(n("78ac"),n("2877")),h=Object(d["a"])(l,i,u,!1,null,"4843c4dc",null),g=h.exports,f={name:"app",components:{Nav:g},computed:Object(s["a"])({},Object(c["d"])(["overlay"]))},b=f,m=(n("034f"),Object(d["a"])(b,o,r,!1,null,null,null)),y=m.exports,v=(n("caad"),n("d3b7"),n("8c4f")),w=(n("96cf"),n("1da1")),T=n("d4ec"),S=n("bee2"),E=n("d929"),k=n("bc3a"),O=n.n(k),_=function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"login",value:function(e){return E["a"].post("/login/",{username:e.username,password:e.password}).then((function(e){var t=e.data.token;return t&&(sessionStorage.setItem("token",t),O.a.defaults.headers.common["Authorization"]="Token "+t),e.data}))}},{key:"logout",value:function(){sessionStorage.removeItem("token")}},{key:"register",value:function(e){return E["a"].post("/signup/",{username:e.username,firstName:e.firstName,lastName:e.lastName,role:e.role,password:e.password})}}]),e}(),x=new _,A=sessionStorage.getItem("token"),P=A?{status:{loggedIn:!0}}:{status:{loggedIn:!1}},C={namespaced:!0,state:P,mutations:{LOGIN_SUCCESS:function(e){e.status.loggedIn=!0},LOGOUT:function(e){e.status.loggedIn=!1}},actions:{login:function(e,t){var n=e.commit;return x.login(t).then((function(e){return n("loginSuccess"),Promise.resolve(e)}),(function(e){return alert("login failed"),Promise.reject(e)}))},logout:function(e){var t=e.commit;x.logout(),t("LOGOUT")}}},j=(n("7db0"),function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getExperiments",value:function(){return E["a"].get("/activities/experiments/")}},{key:"postExperiments",value:function(e){return E["a"].post("/activities/experiments/",e)}},{key:"updateExperiments",value:function(e){return E["a"].put("/activities/experiments/"+e.nick,e)}},{key:"deleteExperiments",value:function(e){return E["a"].delete("/activities/experiments/"+e.nick)}}]),e}()),U=new j,R=n("9a53"),I={namespaced:!0,state:{experiments:[new R["a"]("Experiment 1","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new R["a"]("Experiment 2","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new R["a"]("Experiment 3","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new R["a"]("Experiment 4","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new R["a"]("Experiment 5","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new R["a"]("Experiment 6","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new R["a"]("Experiment 7","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. ")],statusOptions:["planned","ongoing","complete","aborted"]},getters:{getExperimentByTitle:function(e){return function(t){return e.experiments.find((function(e){return e.title===t}))}}},mutations:{SET_STATE:function(e,t){e.experiments=t}},actions:{getExperimentState:function(e){var t=e.commit,n=void 0;return U.getExperiments().then((function(e){n=e.data,t("SET_STATE",n),console.log("experiments loaded")})).catch((function(e){throw console.log(e),"loading error (experiments)"}))},createExperiment:function(e,t){var n=e.commit;U.postExperiment(t).then((function(){n("CREATE_SUCCESS",t),console.log("experiment "+t.title+" created")}))},deleteExperiment:function(e,t){var n=e.commit;U.deleteExperiment(t).then((function(){n("DELETE_SUCCESS",t),console.log("experiment "+t.title+" deleted")}))},updateExperiment:function(e,t){var n=e.commit;U.updateExperiment(t).then((function(){n("UPDATE_SUCCESS",t),console.log("experiment "+t.title+" updated")}))}}},D=function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getFlightplan",value:function(){return E["a"].get("/activities/flightplan/")}},{key:"getUserPlanning",value:function(){return E["a"].get("/activities/planning/")}}]),e}(),L=new D,N={namespaced:!0,state:{flightplan:[]},getters:{},mutations:{SET_STATE:function(e,t){e.flightplan=t}},actions:{getFlightplanState:function(e){var t=e.commit,n=void 0;return L.getFlightplan().then((function(e){n=e,t("SET_STATE",n),console.log("flightplan loaded")})).catch((function(e){throw console.log(e),"loading error (flightplan)"}))}}},M=(n("c740"),n("c975"),n("a434"),n("b0c0"),n("25f0"),function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getItems",value:function(){return E["a"].get("/inventory/")}},{key:"postItem",value:function(e){return E["a"].post("/inventory/",e)}},{key:"updateItem",value:function(e){return E["a"].put("/inventory/"+e.id.toString(),e)}},{key:"deleteItem",value:function(e){return E["a"].delete("/inventory/"+e.id.toString())}}]),e}()),F=new M,V={namespaced:!0,state:{items:[]},getters:{},mutations:{SET_STATE:function(e,t){e.items=t},CREATE_SUCCESS:function(e,t){var n=Object(s["a"])({},t);e.items.push(n)},DELETE_SUCCESS:function(e,t){var n=e.items.indexOf(t);n>-1&&e.items.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.id,a=e.items.findIndex((function(e){return e.id===n}));if(a>-1){e.items.splice(a,1);var o=Object(s["a"])({},t);e.items.push(o)}}},actions:{getInventoryState:function(e){var t=e.commit,n=void 0;return F.getItems().then((function(e){n=e.data,t("SET_STATE",n),console.log("inventory loaded")})).catch((function(e){throw console.log(e),"loading error (inventory)"}))},createItem:function(e,t){var n=e.commit;F.postItem(t).then((function(){n("CREATE_SUCCESS",t),console.log("item "+t.name+" created")}))},deleteItem:function(e,t){var n=e.commit;F.deleteItem(t).then((function(){n("DELETE_SUCCESS",t),console.log("item "+t.name+" deleted")}))},updateItem:function(e,t){var n=e.commit;F.updateItem(t).then((function(){n("UPDATE_SUCCESS",t),console.log("item "+t.name+" updated")}))}}},G=(n("4de4"),n("b85c")),H=n("ab5f"),Y={namespaced:!0,state:{procedures:[],procedureTypes:[{primaryType:"General",subtypes:["Systems","Hygiene","Cooking","Routine maintenance","Special maintenance"]},{primaryType:"Science",subtypes:["Rover","Space suits","Georemap/App-EVA","Geophysical Exploration","Hydration","MAS","REDMARS","Bioplastic","Crans Psychology","IDUN","Psychology-NASA","Psychology-Mission","Psychology-Design base"]},{primaryType:"MCC",subtypes:["Main"]},{primaryType:"Emergencies",subtypes:["Main"]},{primaryType:"Others",subtypes:["Main"]}],uploadProgress:0},getters:{procedurePrimaryTypes:function(e){var t,n=[],a=Object(G["a"])(e.procedureTypes);try{for(a.s();!(t=a.n()).done;){var o=t.value;n.push(o.primaryType)}}catch(r){a.e(r)}finally{a.f()}return n},proceduresByType:function(e){var t,n=[],a=Object(G["a"])(e.procedureTypes);try{for(a.s();!(t=a.n()).done;){var o,r=t.value,s="primary",c={type:r.primaryType,colorVariant:s,subsections:[]},i=e.procedures.filter((function(e){return e.type===r.primaryType})),u=Object(G["a"])(r.subtypes);try{for(u.s();!(o=u.n()).done;){var p=o.value,l=i.filter((function(e){return e.subtype===p})),d={type:p,procedures:l};c.subsections.push(d)}}catch(h){u.e(h)}finally{u.f()}n.push(c)}}catch(h){a.e(h)}finally{a.f()}return n},proceduresAsOptions:function(e,t){var n,a=[],o=t.proceduresByType,r=Object(G["a"])(o);try{for(r.s();!(n=r.n()).done;){var s,c=n.value,i={label:c.type,options:[]},u=Object(G["a"])(c.subsections);try{for(u.s();!(s=u.n()).done;){var p,l=s.value,d=Object(G["a"])(l.procedures);try{for(d.s();!(p=d.n()).done;){var h=p.value;i.options.push({value:h,text:"["+l.type+"] "+h.title})}}catch(g){d.e(g)}finally{d.f()}}}catch(g){u.e(g)}finally{u.f()}a.push(i)}}catch(g){r.e(g)}finally{r.f()}return a}},mutations:{SET_STATE:function(e,t){e.procedures=t.procedures},CREATE_SUCCESS:function(e,t){var n=Object(s["a"])({},t);e.procedures.push(n)},DELETE_SUCCESS:function(e,t){var n=e.procedures.indexOf(t);n>-1&&e.procedures.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.title,a=e.procedures.findIndex((function(e){return e.title===n}));if(console.log(e.procedures[a]),a>-1){e.procedures.splice(a,1);var o=Object(s["a"])({},t);e.procedures.push(o)}}},actions:{getProcedureState:function(e){var t=e.commit,n={procedures:[],procedureTypes:[]};return H["a"].getProcedures().then((function(e){n.procedures=e.data,t("SET_STATE",n),console.log("procedures loaded")})).catch((function(e){throw console.log(e),"loading error (procedures)"}))},createProcedure:function(e,t){var n=e.commit,a=e.state,o=new FormData;o.append("title",t.title),o.append("type",t.type),o.append("subtype",t.subtype),o.append("abstract",t.abstract),o.append("pdfFile",t.file),H["a"].postProcedure(o,(function(e){a.uploadProgress=Math.round(100*e.loaded/e.total)})).then((function(){n("CREATE_SUCCESS",t),a.uploadProgress=0,console.log("procedure "+t.title+" created")}))},deleteProcedure:function(e,t){var n=e.commit;H["a"].deleteProcedure(t).then((function(){n("DELETE_SUCCESS",t),console.log("procedure "+t.title+" deleted")}))},updateProcedure:function(e,t){var n=e.commit,a=e.state,o=new FormData;o.append("title",t.title),o.append("type",t.type),o.append("subtype",t.subtype),o.append("abstract",t.abstract),o.append("pdfFile",t.file),H["a"].updateProcedure(o,(function(e){a.uploadProgress=Math.round(100*e.loaded/e.total)})).then((function(){n("UPDATE_SUCCESS",t),a.uploadProgress=0,console.log("procedure "+t.title+" updated")}))}}},B=(n("07ac"),n("2532"),n("2909")),$=function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getUserProfile",value:function(){return E["a"].get("/asclepios/profile/")}},{key:"updatePassword",value:function(e,t){return E["a"].put("/asclepios/profile/",{oldPassword:e,newPassword:t})}},{key:"updateFavorites",value:function(e){return E["a"].put("/asclepios/profile/",{favoriteProcedures:e})}},{key:"getGroupUsers",value:function(e){return E["a"].get("/asclepios/group/"+e)}}]),e}(),W=new $,q={namespaced:!0,state:{username:"",firstName:"",lastName:"",groups:[],permissions:[],favoriteProcedures:[{nick:"fake-procedure",title:"Fake Procedure",type:"Type",subtype:"Subtype"}],planning:[]},getters:{rights:function(e){var t=[];for(var n in e.permissions)t.push(n);return t},isAllowed:function(e,t){return function(e){return t.rights.includes(e)}},permissionsReadable:function(e){return Object.values(e.permissions)}},mutations:{SET_USER:function(e,t){var n=t;e.username=n.username,e.firstName=n.first_name,e.lastName=n.last_name,e.groups=n.groups,e.permissions=n.permissions,e.favoriteProcedures=n.favoriteProcedures},SET_PLANNING:function(e,t){e.planning=t},ADD_FAV_SUCCESS:function(e,t){e.favoriteProcedures.push(t)},REMOVE_FAV_SUCCESS:function(e,t){var n=e.favoriteProcedures.indexOf(t);n>-1&&e.favoriteProcedures.splice(n,1)},PASSWORD_CHANGED:function(){}},actions:{getUserState:function(e){var t=e.commit,n=void 0;return W.getUserProfile().then((function(e){n=e.data,t("SET_USER",n),console.log("user loaded")})).catch((function(e){throw console.log(e),"loading error (user)"})).then((function(){return L.getUserPlanning()})).then((function(e){n=e.data,t("SET_PLANNING",n),console.log("user planning loaded")})).catch((function(e){throw console.log(e),"loading error (user planning)"}))},toggleToFavorites:function(e,t){var n=e.commit,a=e.state,o=a.favoriteProcedures.indexOf(t),r=Object(B["a"])(a.favoriteProcedures);-1===o?(r.push(t),W.updateFavorites(r).then((function(){n("ADD_FAV_SUCCESS",t),console.log("procedure "+t.title+" added to user favorites")}))):(r.splice(o,1),W.updateFavorites(r).then((function(){n("REMOVE_FAV_SUCCESS",t),console.log("procedure "+t.title+" removed from user favorites")})))},changePassword:function(e,t){var n=e.commit,a=t.oldPassword,o=t.newPassword;W.updatePassword(a,o).then((function(){n("PASSWORD_CHANGED"),console.log("user password changed")}))}}};a["default"].use(c["a"]);var J=new c["a"].Store({modules:{auth:C,experiment:I,flightplan:N,inventory:V,procedure:Y,user:q},state:{missionStartDate:new Date(2021,4,15,0,0,0),astronautsCrew:["Julien","William","Lisbeth","Pierre","Paul","Jacqueline"],units:["Astronauts","MCC","Scientists"],overlay:{show:!1,msg:"",img:"",hideSpinner:!1}},getters:{missionDayNumber:function(e){var t=new Date;return Math.floor((t.getTime()-e.missionStartDate.getTime())/864e5)}},mutations:{SHOW_OVERLAY:function(e,t){e.overlay.show=!0,e.overlay.hideSpinner=t},HIDE_OVERLAY:function(e){e.overlay.show=!1,e.overlay.msg="",e.overlay.img=""},MSG_OVERLAY:function(e,t){e.overlay.msg=t},IMG_OVERLAY:function(e,t){e.overlay.img=t}},actions:{loadAll:function(e){return Object(w["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,t.abrupt("return",n("displayOverlay",{msg:"Loading USER",img:"https://cdn.onlinewebfonts.com/svg/img_210318.png"}).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("user/getUserState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).then((function(){n("displayOverlay",{msg:"Loading INVENTORY",img:"https://cdn.onlinewebfonts.com/svg/img_449535.png"})})).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("inventory/getInventoryState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).then((function(){n("displayOverlay",{msg:"Loading PROCEDURES",img:"https://cdn.onlinewebfonts.com/svg/img_274798.png"})})).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("procedure/getProcedureState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).then((function(){n("hideOverlay")})).catch((function(){n("displayOverlay",{msg:"SERVER ERROR",img:"https://cdn.onlinewebfonts.com/svg/img_505377.png",hideSpinner:!0})})));case 2:case"end":return t.stop()}}),t)})))()},displayOverlay:function(e,t){var n=e.commit,a=t.msg,o=t.img,r=t.hideSpinner;n("MSG_OVERLAY",a),n("IMG_OVERLAY",o),n("SHOW_OVERLAY",r)},hideOverlay:function(e){var t=e.commit;t("HIDE_OVERLAY")}}}),z=J;a["default"].use(v["a"]);var K=function(e,t,n){var a=z.state.auth.status.loggedIn;a?n("/profile"):n()},Q=[{path:"*",name:"404notfound",component:function(){return n.e("chunk-2d0e24e5").then(n.bind(null,"7dac"))}},{path:"/login",alias:"/",name:"login",beforeEnter:K,component:function(){return n.e("chunk-6fedeada").then(n.bind(null,"a55b"))}},{path:"/flightplan",name:"flightplan",component:function(){return n.e("chunk-1d841aa6").then(n.bind(null,"aad6"))}},{path:"/procedures",name:"procedures",component:function(){return n.e("chunk-c911b424").then(n.bind(null,"2ac9"))}},{path:"/experiments",name:"experiments",component:function(){return n.e("chunk-4d6c7e3b").then(n.bind(null,"32c9"))}},{path:"/experiments/:experimentTitle",name:"experiment_details",props:!0,component:function(){return n.e("chunk-684c7eec").then(n.bind(null,"1330"))}},{path:"/inventory",name:"inventory",component:function(){return n.e("chunk-9487678a").then(n.bind(null,"e25f"))}},{path:"/psyforms",name:"psyforms",component:function(){return n.e("chunk-61162857").then(n.bind(null,"29ed"))}},{path:"/communication",name:"communication",component:function(){return n.e("chunk-2d0b1c72").then(n.bind(null,"20fd"))}},{path:"/experiments/:experimentTitle/data/textsheets/:sheetTitle",name:"experiment_textdata",props:!0,component:function(){return n.e("chunk-51ce975b").then(n.bind(null,"1bc7"))}},{path:"/profile",name:"profile",component:function(){return n.e("chunk-43d9bc38").then(n.bind(null,"c66d"))}},{path:"/planning",name:"planning",component:function(){return n.e("chunk-2d0d05dc").then(n.bind(null,"6859"))}}],X=new v["a"]({mode:"history",base:"/",routes:Q}),Z=["/login","/signup"];X.beforeEach((function(e,t,n){var a=!Z.includes(e.path),o=z.state.auth.status.loggedIn;a&&!o?n("/login"):n()}));var ee=X,te=(n("5aea"),n("ab8b"),n("2dd8"),n("5f5b")),ne=n("b1e0"),ae=n("7bb1");a["default"].use(te["a"]),a["default"].use(ne["a"]),a["default"].use(ae["a"]),a["default"].config.productionTip=!1,new a["default"]({router:ee,store:z,render:function(e){return e(y)}}).$mount("#app")},"5aea":function(e,t,n){},"78ac":function(e,t,n){"use strict";var a=n("a268"),o=n.n(a);o.a},"85ec":function(e,t,n){},"9a53":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));n("a4d3"),n("e01a");var a=n("d4ec"),o=(n("ac1f"),n("5319"),n("bee2")),r=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"toNick",value:function(e){return e.toLowerCase().replace(/ /g,"-")}}]),e}(),s=new r,c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];Object(a["a"])(this,e),this.nick=s.toNick(t),this.title=t,this.abstract=n,this.description=o,this.operators=r,this.supervisor=c,this.procedures=i,this.data={textsheets:[],spreadsheets:[]},this.status="planned"}},a268:function(e,t,n){},ab5f:function(e,t,n){"use strict";var a=n("d4ec"),o=n("bee2"),r=n("d929"),s=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"getProcedures",value:function(){return r["a"].get("/activities/procedures/")}},{key:"getFile",value:function(e){return r["a"].get("/activities/procedures/"+e,{responseType:"blob"})}},{key:"postProcedure",value:function(e,t){return r["a"].post("/activities/procedures/",e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}},{key:"updateProcedure",value:function(e,t){return r["a"].put("/activities/procedures/"+e.get("title"),e,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:t})}},{key:"deleteProcedure",value:function(e){return r["a"].delete("/activities/procedures/"+e.title)}}]),e}();t["a"]=new s},d929:function(e,t,n){"use strict";n("d3b7");var a=n("bc3a"),o=n.n(a),r=o.a.create({baseURL:"https://astrolink.earth/api",timeout:3e3});r.interceptors.request.use((function(e){console.log("hey");var t=sessionStorage.getItem("token");return t&&(e.headers.common["Authorization"]="Token "+t),e}),(function(e){return Promise.reject(e)})),t["a"]=r}});
//# sourceMappingURL=app.3bb38fc0.js.map