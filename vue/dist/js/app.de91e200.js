(function(e){function t(t){for(var r,a,i=t[0],c=t[1],u=t[2],p=0,l=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&l.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(l.length)l.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],r=!0,a=1;a<n.length;a++){var i=n[a];0!==o[i]&&(r=!1)}r&&(s.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o={app:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-0775d697":"8e742100","chunk-13f78728":"cf7f6438","chunk-1d841aa6":"91fcc0be","chunk-2945bc30":"8d3d92b8","chunk-2d0b1c72":"f0adf193","chunk-2d0d05dc":"87ae45eb","chunk-2d0e24e5":"11e8660c","chunk-61162857":"269c98d6","chunk-6fedeada":"594f64ce","chunk-9e9c9b90":"5c5cdf13","chunk-692c1aaa":"243f2eea","chunk-afe3f9b6":"66e4b4c0","chunk-d4b689ca":"c900182b"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-13f78728":1,"chunk-1d841aa6":1,"chunk-2945bc30":1,"chunk-61162857":1,"chunk-6fedeada":1,"chunk-afe3f9b6":1,"chunk-d4b689ca":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-0775d697":"31d6cfe0","chunk-13f78728":"70dcabc7","chunk-1d841aa6":"7dcc4d25","chunk-2945bc30":"9e286dff","chunk-2d0b1c72":"31d6cfe0","chunk-2d0d05dc":"31d6cfe0","chunk-2d0e24e5":"31d6cfe0","chunk-61162857":"9879eb70","chunk-6fedeada":"9188ed62","chunk-9e9c9b90":"31d6cfe0","chunk-692c1aaa":"31d6cfe0","chunk-afe3f9b6":"cc763a34","chunk-d4b689ca":"1bc006ba"}[e]+".css",o=c.p+r,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],p=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(p===r||p===o))return t()}var l=document.getElementsByTagName("style");for(i=0;i<l.length;i++){u=l[i],p=u.getAttribute("data-href");if(p===r||p===o)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete a[e],d.parentNode.removeChild(d),n(s)},d.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(d)})).then((function(){a[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var s=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=s);var u,p=document.createElement("script");p.charset="utf-8",p.timeout=120,c.nc&&p.setAttribute("nonce",c.nc),p.src=i(e);var l=new Error;u=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}o[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:p})}),12e4);p.onerror=p.onload=u,document.head.appendChild(p)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],p=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var d=p;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App"},[e.status.loggedIn?n("Nav"):e._e(),n("router-view"),n("b-overlay",{attrs:{show:e.overlay.show,"no-wrap":"",fixed:"","spinner-variant":"info"},scopedSlots:e._u([{key:"overlay",fn:function(){return[n("div",{staticClass:"text-center"},[e.overlay.img?n("img",{attrs:{src:e.overlay.img,alt:"[Loading]",width:"50px"}}):e._e(),n("br"),n("br"),e.overlay.msg?n("strong",{staticStyle:{"font-size":"large"}},[e._v(e._s(e.overlay.msg))]):e._e(),n("br"),n("br"),e.overlay.hideSpinner?e._e():n("b-spinner",{attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1)]},proxy:!0}])}),n("b-alert",{attrs:{variant:e.alert.variant,dismissible:"",fade:"",show:e.alert.show},on:{dismissed:function(e){return this.$store.dispatch("hideAlert")}}},[e._v(" "+e._s(e.alert.msg)+" ")])],1)},o=[],s=n("5530"),i=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{staticClass:"bg-white",staticStyle:{"box-shadow":"0px 3px 15px darkred"},attrs:{toggleable:"lg"}},[n("b-navbar-brand",{attrs:{href:"https://astrolink.earth/",target:"_self"}}),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-text",[e._v(" Alpha Version 0.8 "),n("a",{staticClass:"ml-2",attrs:{href:"https://github.com/Space-at-your-Service/Astrolink/issues",target:"__blank"}},[n("b-icon",{attrs:{icon:"bug-fill"}})],1)])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item",{class:{active:"flightplan"===e.isActive},attrs:{to:"/flightplan"},on:{click:function(t){e.isActive="flightplan"}}},[e._v("Flightplan")]),e.isAllowed("activities.view_procedure")?n("b-nav-item",{class:{active:"procedures"===e.isActive},attrs:{to:"/procedures"},on:{click:function(t){e.isActive="procedures"}}},[e._v("Procedures")]):e._e(),e.isAllowed("activities.view_experiment")?n("b-nav-item",{class:{active:"experiments"===e.isActive},attrs:{to:"/experiments"},on:{click:function(t){e.isActive="experiments"}}},[e._v("Experiments")]):e._e(),e.isAllowed("inventory.view_item")?n("b-nav-item",{class:{active:"inventory"===e.isActive},attrs:{to:"/inventory"},on:{click:function(t){e.isActive="inventory"}}},[e._v("Inventory")]):e._e(),n("b-nav-item-dropdown",{staticClass:"ml-lg-5",attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[e._v(e._s(e.username))])]},proxy:!0}])},[n("b-dropdown-item",{staticClass:"text-center",attrs:{to:"/profile"},on:{click:function(t){e.isActive="profile"}}},[n("b-icon",{attrs:{icon:"person-circle"}}),e._v(" "),n("strong",[e._v("Profile")])],1),n("b-dropdown-item",{staticClass:"text-center",attrs:{to:"/planning"},on:{click:function(t){e.isActive="planning"}}},[n("b-icon",{attrs:{icon:"calendar-range"}}),e._v(" "),n("strong",[e._v("Planning")])],1),n("b-dropdown-item",{staticClass:"text-center",on:{click:e.handleLogout}},[n("b-icon",{attrs:{icon:"box-arrow-left"}}),e._v(" "),n("strong",[e._v("Log Out")])],1)],1)],1)],1)],1)},u=[],p={data:function(){return{loading:!1,isActive:""}},computed:Object(s["a"])(Object(s["a"])({},Object(i["d"])("user",["username"])),Object(i["c"])("user",["isAllowed"])),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(i["b"])(["loadAll","displayOverlay","hideOverlay"])),Object(i["b"])("auth",["logout"])),Object(i["b"])("user",["getUserState"])),{},{handleLogout:function(){this.logout().then(this.$router.push("/login"))}}),mounted:function(){this.$store.dispatch("loadAll")}},l=p,d=(n("7bd6"),n("2877")),h=Object(d["a"])(l,c,u,!1,null,"0355341f",null),f=h.exports,g={name:"app",components:{Nav:f},computed:Object(s["a"])(Object(s["a"])({},Object(i["d"])(["overlay","alert"])),Object(i["d"])("auth",["status"]))},m=g,b=(n("034f"),Object(d["a"])(m,a,o,!1,null,null,null)),v=b.exports,y=(n("caad"),n("d3b7"),n("8c4f")),w=(n("a15b"),n("d81d"),n("ddb0"),n("96cf"),n("1da1")),T=n("d4ec"),S=n("bee2"),E=n("d929"),x=function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"login",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].post("/login/",{username:t.username,password:t.password}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),O=new x,k=sessionStorage.getItem("token"),_=k?{status:{loggedIn:!0}}:{status:{loggedIn:!1}},j={namespaced:!0,state:_,mutations:{LOGIN_SUCCESS:function(e){e.status.loggedIn=!0},LOGOUT:function(e){e.status.loggedIn=!1}},actions:{login:function(e,t){return Object(w["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",O.login(t).then((function(e){var t=e.data.token;t&&(sessionStorage.setItem("token",t),r("LOGIN_SUCCESS"))})));case 2:case"end":return n.stop()}}),n)})))()},logout:function(e){var t=e.commit;sessionStorage.removeItem("token"),t("LOGOUT")}}},R=(n("7db0"),n("c740"),n("c975"),n("a434"),n("2909")),A=function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getExperiments",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].get("/activities/experiments/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postExperiment",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].post("/activities/experiments/",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateExperiment",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].put("/activities/experiments/"+t.title,t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteExperiment",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].delete("/activities/experiments/"+t.title));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),C=new A,P=n("9a53"),U={namespaced:!0,state:{experiments:[new P["a"]("Experiment 1","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new P["a"]("Experiment 2","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new P["a"]("Experiment 3","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new P["a"]("Experiment 4","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new P["a"]("Experiment 5","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new P["a"]("Experiment 6","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. "),new P["a"]("Experiment 7","This is a short abstract less than 140 words.","This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. This description can be as long as you want, up to 1000 characters. ")],statusOptions:["planned","ongoing","complete","aborted"],defaultExperimentLogo:"https://upload.wikimedia.org/wikipedia/commons/2/2b/Apollo_program_insignia.png"},getters:{getExperimentByTitle:function(e){return function(t){return e.experiments.find((function(e){return e.title===t}))}}},mutations:{SET_STATE:function(e,t){e.experiments=t},CREATE_SUCCESS:function(e,t){var n=Object(s["a"])({},t);e.experiments.push(n)},DELETE_SUCCESS:function(e,t){var n=e.experiments.indexOf(t);n>-1&&e.experiments.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.title,r=e.experiments.findIndex((function(e){return e.title===n}));if(console.log(e.experiments[r]),r>-1){e.experiments.splice(r,1);var a=Object(s["a"])({},t);e.experiments.push(a)}}},actions:{getExperimentState:function(e){var t=e.commit,n=void 0;return C.getExperiments().then((function(e){n=e.data,t("SET_STATE",n),console.log("experiments loaded")})).catch((function(e){throw console.log(e),"loading error (experiments)"}))},createExperiment:function(e,t){var n=e.commit;C.postExperiment(t).then((function(){n("CREATE_SUCCESS",t),console.log("experiment "+t.title+" created")}))},deleteExperiment:function(e,t){var n=e.commit;C.deleteExperiment(t).then((function(){n("DELETE_SUCCESS",t),console.log("experiment "+t.title+" deleted")}))},updateExperiment:function(e,t){var n=e.commit;C.updateExperiment(t).then((function(){n("UPDATE_SUCCESS",t),console.log("experiment "+t.title+" updated")}))},createTextsheet:function(e,t){var n=e.commit,r=t.experiment,a=t.textsheet,o=Object(s["a"])({},r),i=Object(s["a"])({},o.data),c=Object(R["a"])(o.data.textsheets);return c.push(Object(s["a"])({},a)),i.textsheets=c,o.data=i,C.updateExperiment(o).then((function(){n("UPDATE_SUCCESS",o),console.log("textsheet "+a.title+" created for "+o.title+" updated")}))},updateTextsheet:function(e,t){var n=e.commit,r=t.experiment,a=t.textsheet,o=Object(s["a"])({},r),i=o.data.textsheets.findIndex((function(e){return e.title===a.title}));return o.data.textsheets.splice(i,1),o.data.textsheets.push(Object(s["a"])({},a)),C.updateExperiment(r).then((function(){n("UPDATE_SUCCESS",o),console.log("textsheet "+a.title+" updated for "+o.title+" updated")}))}}},I=function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getFlightplan",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].get("/activities/flightplan/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUserPlanning",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].get("/activities/planning/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postTask",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].post("/activities/planning/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),L=new I,D={namespaced:!0,state:{flightplan:[]},getters:{},mutations:{SET_STATE:function(e,t){e.flightplan=t}},actions:{getFlightplanState:function(e){var t=e.commit,n=void 0;return L.getFlightplan().then((function(e){n=e.data,t("SET_STATE",n),console.log("flightplan loaded")})).catch((function(e){throw console.log(e),"loading error (flightplan)"}))}}},N=(n("b0c0"),n("25f0"),function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getItems",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].get("/inventory/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postItem",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].post("/inventory/",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateItem",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].put("/inventory/"+t.id.toString(),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteItem",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].delete("/inventory/"+t.id.toString()));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),M=new N,F={namespaced:!0,state:{items:[]},getters:{},mutations:{SET_STATE:function(e,t){e.items=t},CREATE_SUCCESS:function(e,t){var n=Object(s["a"])({},t);e.items.push(n)},DELETE_SUCCESS:function(e,t){var n=e.items.indexOf(t);n>-1&&e.items.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.id,r=e.items.findIndex((function(e){return e.id===n}));if(r>-1){e.items.splice(r,1);var a=Object(s["a"])({},t);e.items.push(a)}}},actions:{getInventoryState:function(e){var t=e.commit,n=void 0;return M.getItems().then((function(e){n=e.data,t("SET_STATE",n),console.log("inventory loaded")})).catch((function(e){throw console.log(e),"loading error (inventory)"}))},createItem:function(e,t){var n=e.commit;return M.postItem(t).then((function(){n("CREATE_SUCCESS",t),console.log("item "+t.name+" created")}))},deleteItem:function(e,t){var n=e.commit;return M.deleteItem(t).then((function(){n("DELETE_SUCCESS",t),console.log("item "+t.name+" deleted")}))},updateItem:function(e,t){var n=e.commit;return M.updateItem(t).then((function(){n("UPDATE_SUCCESS",t),console.log("item "+t.name+" updated")}))}}},V=(n("4de4"),n("b85c")),G=n("ab5f"),H={namespaced:!0,state:{procedures:[],procedureTypes:[{primaryType:"General",subtypes:["Systems","Hygiene","Cooking","Routine maintenance","Special maintenance"]},{primaryType:"Science",subtypes:["Rover","Space suits","Georemap/App-EVA","Geophysical Exploration","Hydration","MAS","REDMARS","Bioplastic","Crans Psychology","IDUN","Psychology-NASA","Psychology-Mission","Psychology-Design base"]},{primaryType:"MCC",subtypes:["Main"]},{primaryType:"Emergencies",subtypes:["Main"]},{primaryType:"Others",subtypes:["Main"]}],uploadProgress:0},getters:{procedurePrimaryTypes:function(e){var t,n=[],r=Object(V["a"])(e.procedureTypes);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.primaryType)}}catch(o){r.e(o)}finally{r.f()}return n},proceduresByType:function(e){var t,n=[],r=Object(V["a"])(e.procedureTypes);try{for(r.s();!(t=r.n()).done;){var a,o=t.value,s={type:o.primaryType,subsections:[]},i=e.procedures.filter((function(e){return e.type===o.primaryType})),c=Object(V["a"])(o.subtypes);try{for(c.s();!(a=c.n()).done;){var u=a.value,p=i.filter((function(e){return e.subtype===u})),l={type:u,procedures:p};s.subsections.push(l)}}catch(d){c.e(d)}finally{c.f()}n.push(s)}}catch(d){r.e(d)}finally{r.f()}return n},proceduresAsOptions:function(e,t){var n,r=[],a=t.proceduresByType,o=Object(V["a"])(a);try{for(o.s();!(n=o.n()).done;){var s,i=n.value,c={label:i.type,options:[]},u=Object(V["a"])(i.subsections);try{for(u.s();!(s=u.n()).done;){var p,l=s.value,d=Object(V["a"])(l.procedures);try{for(d.s();!(p=d.n()).done;){var h=p.value;c.options.push({value:h.title,text:"["+l.type+"] "+h.title})}}catch(f){d.e(f)}finally{d.f()}}}catch(f){u.e(f)}finally{u.f()}r.push(c)}}catch(f){o.e(f)}finally{o.f()}return r},findProcedureByTitle:function(e){return function(t){return console.log(e.procedures),console.log("titl"+t),e.procedures.find((function(e){return e.title===t}))}}},mutations:{SET_STATE:function(e,t){e.procedures=t.procedures},CREATE_SUCCESS:function(e,t){var n=Object(s["a"])({},t);e.procedures.push(n)},DELETE_SUCCESS:function(e,t){var n=e.procedures.indexOf(t);n>-1&&e.procedures.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.title,r=e.procedures.findIndex((function(e){return e.title===n}));if(console.log(e.procedures[r]),r>-1){e.procedures.splice(r,1);var a=Object(s["a"])({},t);e.procedures.push(a)}}},actions:{getProcedureState:function(e){var t=e.commit,n={procedures:[],procedureTypes:[]};return G["a"].getProcedures().then((function(e){n.procedures=e.data,t("SET_STATE",n),console.log("procedures loaded")})).catch((function(e){throw console.log(e),"loading error (procedures)"}))},createProcedure:function(e,t){var n=e.commit,r=e.state,a=new FormData;a.append("title",t.title),a.append("type",t.type),a.append("subtype",t.subtype),a.append("abstract",t.abstract),a.append("pdfFile",t.file),G["a"].postProcedure(a,(function(e){r.uploadProgress=Math.round(100*e.loaded/e.total)})).then((function(){n("CREATE_SUCCESS",t),r.uploadProgress=0,console.log("procedure "+t.title+" created")}))},deleteProcedure:function(e,t){var n=e.commit;G["a"].deleteProcedure(t).then((function(){n("DELETE_SUCCESS",t),console.log("procedure "+t.title+" deleted")}))},updateProcedure:function(e,t){var n=e.commit,r=e.state,a=new FormData;a.append("title",t.title),a.append("type",t.type),a.append("subtype",t.subtype),a.append("abstract",t.abstract),a.append("pdfFile",t.file),G["a"].updateProcedure(a,(function(e){r.uploadProgress=Math.round(100*e.loaded/e.total)})).then((function(){n("UPDATE_SUCCESS",t),r.uploadProgress=0,console.log("procedure "+t.title+" updated")}))}}},B=(n("07ac"),n("2532"),function(){function e(){Object(T["a"])(this,e)}return Object(S["a"])(e,[{key:"getUserProfile",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].get("/asclepios/profile/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePassword",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].put("/asclepios/profile/",{oldPassword:t,newPassword:n}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateFavorites",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].put("/asclepios/profile/",{favoriteProcedures:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUnit",value:function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",E["a"].get("/asclepios/unit/"+t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),Y=new B,$={namespaced:!0,state:{username:"",firstName:"",lastName:"",groups:[],permissions:[],favoriteProcedures:[],planning:[]},getters:{rights:function(e){var t=[];for(var n in e.permissions)t.push(n);return t},isAllowed:function(e,t){return function(e){return t.rights.includes(e)}},permissionsReadable:function(e){return Object.values(e.permissions)},favoriteProceduresObjects:function(e,t,n,r){var a,o=[],i=Object(V["a"])(e.favoriteProcedures);try{for(i.s();!(a=i.n()).done;){var c=a.value,u=Object(s["a"])({},r["procedure/findProcedureByTitle"](c));o.push(u)}}catch(p){i.e(p)}finally{i.f()}return o}},mutations:{SET_USER:function(e,t){var n=t;e.username=n.username,e.firstName=n.first_name,e.lastName=n.last_name,e.groups=n.groups,e.permissions=n.permissions,e.favoriteProcedures=n.favoriteProcedures},SET_PLANNING:function(e,t){e.planning=t},ADD_FAV_SUCCESS:function(e,t){e.favoriteProcedures.push(t)},REMOVE_FAV_SUCCESS:function(e,t){var n=e.favoriteProcedures.indexOf(t);n>-1&&e.favoriteProcedures.splice(n,1)},PASSWORD_CHANGED:function(){}},actions:{getUserState:function(e){var t=e.commit,n=void 0;return Y.getUserProfile().then((function(e){n=e.data,t("SET_USER",n),console.log("user loaded")})).catch((function(e){throw console.log(e),"loading error (user)"})).then((function(){return L.getUserPlanning()})).then((function(e){n=e.data,t("SET_PLANNING",n),console.log("user planning loaded")})).catch((function(e){throw console.log(e),"loading error (user planning)"}))},toggleToFavorites:function(e,t){var n=e.commit,r=e.state,a=t.title,o=r.favoriteProcedures.indexOf(a),s=Object(R["a"])(r.favoriteProcedures);-1===o?(s.push(a),Y.updateFavorites(s).then((function(){n("ADD_FAV_SUCCESS",a),console.log("procedure "+a+" added to user favorites")}))):(s.splice(o,1),Y.updateFavorites(s).then((function(){n("REMOVE_FAV_SUCCESS",a),console.log("procedure "+a+" removed from user favorites")})))},changePassword:function(e,t){var n=e.commit,r=t.oldPassword,a=t.newPassword;Y.updatePassword(r,a).then((function(){n("PASSWORD_CHANGED"),console.log("user password changed")}))}}};r["default"].use(i["a"]);var W=new i["a"].Store({modules:{auth:j,experiment:U,flightplan:D,inventory:F,procedure:H,user:$},state:{missionStartDate:new Date(2021,4,15,0,0,0),staff:{astronauts:[],mcc:[],scientists:[]},units:["Astronauts","MCC","Scientists"],overlay:{show:!1,msg:"",img:"",hideSpinner:!1},alert:{show:!1,msg:"",variant:"warning"}},getters:{missionDayNumber:function(e){var t=new Date;return Math.floor((t.getTime()-e.missionStartDate.getTime())/864e5)},astronautsCrew:function(e){return e.staff.astronauts},listUsernames:function(e){return function(t){var n=e.staff[t];return 0===n.length?[]:n.map((function(e){return e.username}))}}},mutations:{SET_STAFF:function(e,t){e.staff=t},SHOW_OVERLAY:function(e,t){e.overlay.show=!0,e.overlay.hideSpinner=t},HIDE_OVERLAY:function(e){e.overlay.show=!1,e.overlay.msg="",e.overlay.img=""},MSG_OVERLAY:function(e,t){e.overlay.msg=t},IMG_OVERLAY:function(e,t){e.overlay.img=t},DISPLAY_ALERT:function(e,t){e.alert.show=!0,e.alert.msg=t.msg,t.variant&&(e.alert.variant=t.variant)},HIDE_ALERT:function(e){e.alert.show=!1,e.alert.msg="",e.alert.variant="warning"}},actions:{loadAll:function(e){return Object(w["a"])(regeneratorRuntime.mark((function t(){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=[],a=!1,t.abrupt("return",n("displayOverlay",{msg:"Loading USER",img:""}).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("user/getUserState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){a=!0,r.push("User"),console.error(e)})).then((function(){n("displayOverlay",{msg:"Loading INVENTORY",img:""})})).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("inventory/getInventoryState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){a=!0,r.push("Inventory"),console.error(e)})).then((function(){n("displayOverlay",{msg:"Loading PROCEDURES",img:""})})).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("procedure/getProcedureState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){a=!0,r.push("Procedures"),console.error(e)})).then((function(){n("displayOverlay",{msg:"Loading FLIGHTPLAN",img:""})})).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("flightplan/getFlightplanState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){a=!0,r.push("Flightplan"),console.error(e)})).then((function(){n("displayOverlay",{msg:"Loading EXPERIMENTS",img:""})})).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("experiment/getExperimentState",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){a=!0,r.push("Experiments"),console.error(e)})).then((function(){n("displayOverlay",{msg:"Loading MISSION MEMBERS",img:""})})).then(Object(w["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n("loadMembers",null,{root:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){a=!0,r.push("Mission members"),console.error(e)})).then((function(){n("hideOverlay")})).then((function(){if(n("hideOverlay"),a){var e="Failed to load the following resources: "+r.join(", ");n("displayAlert",{msg:e,variant:"danger"})}})));case 4:case"end":return t.stop()}}),t)})))()},loadMembers:function(e){return Object(w["a"])(regeneratorRuntime.mark((function t(){var n,r,a,o,i,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,r=e.state,a=0,o=Object(s["a"])({},r.staff),t.t0=regeneratorRuntime.keys(o);case 4:if((t.t1=t.t0()).done){t.next=12;break}return i=t.t1.value,c=r.units[a],a+=1,t.next=10,Y.getUnit(c).then((function(e){o[i]=e.data}));case 10:t.next=4;break;case 12:n("SET_STAFF",o),console.log("mission members loaded");case 14:case"end":return t.stop()}}),t)})))()},displayOverlay:function(e,t){var n=e.commit,r=t.msg,a=t.img,o=t.hideSpinner;n("MSG_OVERLAY",r),n("IMG_OVERLAY",a),n("SHOW_OVERLAY",o)},hideOverlay:function(e){var t=e.commit;t("HIDE_OVERLAY")},displayAlert:function(e,t){var n=e.commit,r=t.msg,a=t.variant;n("DISPLAY_ALERT",{msg:r,variant:a})},hideAlert:function(e){var t=e.commit;t("HIDE_ALERT")}}}),q=W;r["default"].use(y["a"]);var z=function(e,t,n){var r=q.state.auth.status.loggedIn;r?n("/profile"):n()},J=[{path:"/404",name:"404notfound",component:function(){return n.e("chunk-2d0e24e5").then(n.bind(null,"7dac"))}},{path:"*",redirect:"/404"},{path:"/login",alias:"/",name:"login",beforeEnter:z,component:function(){return n.e("chunk-6fedeada").then(n.bind(null,"a55b"))}},{path:"/flightplan",name:"flightplan",component:function(){return n.e("chunk-1d841aa6").then(n.bind(null,"aad6"))}},{path:"/procedures",name:"procedures",component:function(){return Promise.all([n.e("chunk-9e9c9b90"),n.e("chunk-692c1aaa")]).then(n.bind(null,"2ac9"))}},{path:"/experiments",name:"experiments",component:function(){return n.e("chunk-0775d697").then(n.bind(null,"32c9"))}},{path:"/experiments/:experimentTitle",name:"experiment_details",props:!0,component:function(){return Promise.all([n.e("chunk-9e9c9b90"),n.e("chunk-afe3f9b6")]).then(n.bind(null,"1330"))}},{path:"/inventory",name:"inventory",component:function(){return n.e("chunk-2945bc30").then(n.bind(null,"e25f"))}},{path:"/psyforms",name:"psyforms",component:function(){return n.e("chunk-61162857").then(n.bind(null,"29ed"))}},{path:"/communication",name:"communication",component:function(){return n.e("chunk-2d0b1c72").then(n.bind(null,"20fd"))}},{path:"/experiments/:experimentTitle/data/textsheets/:sheetTitle",name:"experiment_textdata",props:!0,component:function(){return n.e("chunk-13f78728").then(n.bind(null,"1bc7"))}},{path:"/profile",name:"profile",component:function(){return n.e("chunk-d4b689ca").then(n.bind(null,"c66d"))}},{path:"/planning",name:"planning",component:function(){return n.e("chunk-2d0d05dc").then(n.bind(null,"6859"))}}],K=new y["a"]({mode:"history",base:"/",routes:J}),X=["/login","/signup"];K.beforeEach((function(e,t,n){var r=!X.includes(e.path),a=q.state.auth.status.loggedIn;r&&!a?n("/login"):n()}));var Q=K,Z=(n("5aea"),n("ab8b"),n("2dd8"),n("5f5b")),ee=n("b1e0"),te=n("7bb1");r["default"].use(Z["a"]),r["default"].use(ee["a"]),r["default"].use(te["a"],{fieldsBagName:"vvFields"}),r["default"].config.productionTip=!1,new r["default"]({router:Q,store:q,render:function(e){return e(v)}}).$mount("#app")},"5aea":function(e,t,n){},"7bd6":function(e,t,n){"use strict";var r=n("f967"),a=n.n(r);a.a},"85ec":function(e,t,n){},"9a53":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("a4d3"),n("e01a");var r=n("d4ec"),a=(n("ac1f"),n("5319"),n("bee2")),o=function(){function e(){Object(r["a"])(this,e)}return Object(a["a"])(e,[{key:"toNick",value:function(e){return e.toLowerCase().replace(/ /g,"-")}}]),e}(),s=new o,i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];Object(r["a"])(this,e),this.nick=s.toNick(t),this.title=t,this.abstract=n,this.description=a,this.operators=o,this.supervisor=i,this.procedures=c,this.data={textsheets:[],spreadsheets:[]},this.status="planned"}},ab5f:function(e,t,n){"use strict";n("96cf");var r=n("1da1"),a=n("d4ec"),o=n("bee2"),s=n("d929"),i=function(){function e(){Object(a["a"])(this,e)}return Object(o["a"])(e,[{key:"getProcedures",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].get("/activities/procedures/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFile",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].get("/activities/procedures/"+t,{responseType:"blob"}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postProcedure",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].post("/activities/procedures/",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateProcedure",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].put("/activities/procedures/"+t.get("title"),t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteProcedure",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",s["a"].delete("/activities/procedures/"+t.title));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new i},d929:function(e,t,n){"use strict";n("d3b7");var r=n("bc3a"),a=n.n(r),o=a.a.create({baseURL:"https://astrolink.earth/api",timeout:3e3});o.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return t&&(e.headers.common["Authorization"]="Token "+t),e}),(function(e){return Promise.reject(e)})),t["a"]=o},f967:function(e,t,n){}});
//# sourceMappingURL=app.de91e200.js.map