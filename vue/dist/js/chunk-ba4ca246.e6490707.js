(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba4ca246"],{"25f0":function(t,e,i){"use strict";var a=i("6eeb"),n=i("825a"),s=i("d039"),r=i("ad6d"),o="toString",c=RegExp.prototype,l=c[o],d=s((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),u=l.name!=o;(d||u)&&a(RegExp.prototype,o,(function(){var t=n(this),e=String(t.source),i=t.flags,a=String(void 0===i&&t instanceof RegExp&&!("flags"in c)?r.call(t):i);return"/"+e+"/"+a}),{unsafe:!0})},3959:function(t,e,i){},9577:function(t,e,i){"use strict";var a=i("3959"),n=i.n(a);n.a},ad6d:function(t,e,i){"use strict";var a=i("825a");t.exports=function(){var t=a(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},b0c0:function(t,e,i){var a=i("83ab"),n=i("9bf2").f,s=Function.prototype,r=s.toString,o=/^\s*function ([^ (]*)/,c="name";a&&!(c in s)&&n(s,c,{configurable:!0,get:function(){try{return r.call(this).match(o)[1]}catch(t){return""}}})},d81d:function(t,e,i){"use strict";var a=i("23e7"),n=i("b727").map,s=i("1dde"),r=i("ae40"),o=s("map"),c=r("map");a({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e25f:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-container"},[i("h3",{staticClass:"section-title"},[t._v("Inventory")]),i("b-container-fluid",{staticClass:"m-0 p-0"},[i("b-row",{staticClass:"my-3",attrs:{"no-gutters":""}},[i("b-col",[t.permissions.includes("inventory.add_item")?i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.createModal",modifiers:{createModal:!0}}],staticClass:"float-left",staticStyle:{"border-radius":"15px"},attrs:{size:"lg",variant:"info"}},[i("b-icon",{staticClass:"mr-1",attrs:{icon:"plus-circle-fill"}}),t._v(" New item ")],1):t._e()],1),i("b-col",[i("b-form-checkbox",{staticClass:"mt-2",attrs:{id:"hideEmptyInput",switch:"",size:"lg"},model:{value:t.hideEmpty,callback:function(e){t.hideEmpty=e},expression:"hideEmpty"}},[t._v(" Hide empty items ")])],1),i("b-col",{staticClass:"p-auto"},[i("b-icon",{staticClass:"h3 float-right mt-2 mr-2",attrs:{icon:"search"}})],1),i("b-col",{attrs:{cols:"3"}},[i("b-input-group",{staticClass:"mt-1"},[i("b-form-input",{attrs:{type:"search",id:"filterInput",placeholder:"Type to search . . ."},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1)],1),i("b-pagination",{staticClass:"my-0",attrs:{"total-rows":t.items.length,"per-page":t.perPage,align:"fill",size:"sm"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),i("b-table",{ref:"inventory",attrs:{id:"inventory","primary-key":"id",items:t.items,fields:t.fields,filter:t.filter,"filter-included-fields":t.filterOn,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"current-page":t.currentPage,"per-page":t.perPage,busy:t.isBusy,fixed:"",hover:"",striped:"",bordered:"","head-variant":"dark","table-variant":"light","tbody-tr-class":t.rowClass,"tbody-transition-props":t.transProps},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e},"row-selected":t.onRowSelected},scopedSlots:t._u([{key:"cell(quantity)",fn:function(e){return[i("div",{staticClass:"container"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[t._v(" "+t._s(e.item.quantity)+" ")]),i("div",{staticClass:"col"},[i("b-button-group",{staticClass:"float-right"},[0==e.item.quantity?i("b-badge",{staticClass:"m-auto",attrs:{variant:"danger"}},[t._v("empty")]):t._e(),e.item.quantity>0&&t.permissions.includes("inventory.modify_item_qty")?i("b-button",{staticClass:"mr-1",attrs:{size:"sm",variant:""},on:{click:function(i){return t.removeUnit(e.item)}}},[i("b-icon",{attrs:{icon:"dash"}})],1):t._e(),t.permissions.includes("inventory.modify_item_qty")?i("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:""},on:{click:function(i){return t.addUnit(e.item)}}},[i("b-icon",{attrs:{icon:"plus"}})],1):t._e()],1)],1)])])]}},{key:"cell(details)",fn:function(e){return[i("b-button",{staticClass:"float-right",attrs:{size:"sm",variant:""},on:{click:e.toggleDetails}},[t._v(" "+t._s(e.detailsShowing?"Hide":"Show")+" ")])]}},{key:"row-details",fn:function(e){return[i("div",{staticClass:"container p-0 "},[i("div",{staticClass:"row justify-content-between"},[i("div",{staticClass:"col"},[i("b",{staticClass:"text-info"},[t._v(t._s(e.item.details))])]),i("div",{staticClass:"col-1"},[i("b-button-group",{staticClass:"float-right"},[t.permissions.includes("inventory.change_item")?i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.editModal",modifiers:{editModal:!0}}],staticClass:"mr-1",attrs:{size:"sm",variant:"info"},on:{click:function(i){return t.editModal(e.item)}}},[i("b-icon",{attrs:{icon:"pencil-square"}})],1):t._e(),t.permissions.includes("inventory.delete_item")?i("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"danger"},on:{click:function(i){return t.deleteThisItem(e.item)}}},[i("b-icon",{attrs:{icon:"trash"}})],1):t._e()],1)],1)])])]}},{key:"table-colgroup",fn:function(e){return t._l(e.fields,(function(t){return i("col",{key:t.key,style:{width:"name"!==t.key?"80px":"180px"}})}))}},{key:"table-busy",fn:function(){return[i("div",{staticClass:"text-center text-info my-2"},[i("b-spinner",{staticClass:"align-middle",attrs:{type:"grow"}}),i("strong",[t._v("Loading...")])],1)]},proxy:!0}])}),i("b-modal",{attrs:{id:"createModal",title:"New item",centered:""},on:{ok:function(e){return e.preventDefault(),t.okCreate(e)},hidden:t.resetCreatedItem}},[i("form",[i("b-form-group",{attrs:{label:"Item ID","label-for":"createdIdInput","invalid-feedback":t.invalidIdFeedback(),state:t.checkId(t.createdItem)}},[i("b-form-input",{attrs:{id:"createdIdInput",formatter:t.idFormatter},model:{value:t.createdItem.id,callback:function(e){t.$set(t.createdItem,"id",e)},expression:"createdItem.id"}})],1),i("b-form-group",{attrs:{label:"Name","label-for":"createdNameInput","invalid-feedback":t.invalidNameFeedback(),state:t.checkName(t.createdItem)}},[i("b-form-input",{attrs:{id:"createdNameInput",trim:""},model:{value:t.createdItem.name,callback:function(e){t.$set(t.createdItem,"name",e)},expression:"createdItem.name"}})],1),i("b-form-group",{attrs:{label:"Quantity","label-for":"createdQuantityInput","invalid-feedback":t.invalidQuantityFeedback(),state:t.checkQuantity(t.createdItem)}},[i("b-form-input",{attrs:{id:"createdQuantityInput",type:"number",min:"0"},model:{value:t.createdItem.quantity,callback:function(e){t.$set(t.createdItem,"quantity",e)},expression:"createdItem.quantity"}})],1),i("b-form-group",{attrs:{label:"Details","label-for":"createdDetailsInput","invalid-feedback":t.invalidDetailsFeedback(),state:t.checkDetails(t.createdItem)}},[i("b-form-textarea",{attrs:{id:"createdDetailsInput",size:"sm","no-resize":""},model:{value:t.createdItem.details,callback:function(e){t.$set(t.createdItem,"details",e)},expression:"createdItem.details"}})],1)],1)]),i("b-modal",{attrs:{id:"editModal",title:t.editedItem.id,centered:""},on:{ok:function(e){return e.preventDefault(),t.okEdit(e)}}},[i("form",[i("b-form-group",{attrs:{label:"Name","label-for":"editedNameInput","invalid-feedback":t.invalidNameFeedback(),state:t.checkName(t.editedItem)}},[i("b-form-input",{attrs:{id:"editedNameInput",trim:""},model:{value:t.editedItem.name,callback:function(e){t.$set(t.editedItem,"name",e)},expression:"editedItem.name"}})],1),i("b-form-group",{attrs:{label:"Quantity","label-for":"editedQuantityInput","invalid-feedback":t.invalidQuantityFeedback(),state:t.checkQuantity(t.editedItem)}},[i("b-form-input",{attrs:{id:"editedQuantityInput",type:"number",min:"0"},model:{value:t.editedItem.quantity,callback:function(e){t.$set(t.editedItem,"quantity",e)},expression:"editedItem.quantity"}})],1),i("b-form-group",{attrs:{label:"Details","invalid-feedback":t.invalidDetailsFeedback(),state:t.checkDetails(t.editedItem)}},[i("b-form-textarea",{attrs:{id:"editedDetailsInput",size:"sm","no-resize":""},model:{value:t.editedItem.details,callback:function(e){t.$set(t.editedItem,"details",e)},expression:"editedItem.details"}})],1)],1)])],1)},n=[],s=(i("4de4"),i("d81d"),i("fb6a"),i("b0c0"),i("5530")),r=i("2f62"),o=(i("d3b7"),i("25f0"),i("d4ec")),c=i("bee2"),l=i("d929"),d=function(){function t(){Object(o["a"])(this,t)}return Object(c["a"])(t,[{key:"getItems",value:function(){return l["a"].get("/inventory/")}},{key:"postItem",value:function(t){return l["a"].post("/inventory/",t)}},{key:"updateItem",value:function(t){return l["a"].put("/inventory/"+t.id.toString(),t)}},{key:"deleteItem",value:function(t){return l["a"].delete("/inventory/"+t.id.toString())}}]),t}(),u=new d,m={data:function(){return{items:[],fields:[{key:"id",label:"Item ID",sortable:!0,sortDirection:"desc"},{key:"name",label:"Name",sortable:!0},{key:"quantity",label:"Quantity",sortable:!1},{key:"details",label:"Details",sortable:!1}],sortBy:"",sortDesc:!1,sortDirection:"asc",filter:null,filterOn:[],hideEmpty:!1,transProps:{name:"flip-list"},selected:[],currentPage:1,perPage:10,isBusy:!1,createdItem:{id:"",name:"",details:"",quantity:0},editedItem:{id:"",name:"",details:"",quantity:0}}},computed:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(r["d"])(["inventoryHistory"])),Object(r["d"])("user",["permissions"])),{},{sortOptions:function(){return this.fields.filter((function(t){return t.sortable})).map((function(t){return{text:t.label,value:t.key}}))}}),methods:Object(s["a"])(Object(s["a"])({},Object(r["b"])(["addItemUnit","removeItemUnit","deleteItem","createNewItem"])),{},{onRowSelected:function(t){this.selected=t},rowClass:function(t){var e="";return 0==t.quantity&&(e+="table-danger",this.hideEmpty&&(e+=" d-none")),e},addUnit:function(t){var e=this;t.quantity++,u.updateItem(t).then(this.$bvToast.toast("Your item's quantity has been successfully edited.",{title:"Item quantity edited",variant:"success",solid:!0})).catch((function(t){console.log(t),e.refreshInventory()}))},removeUnit:function(t){var e=this;t.quantity>0&&(t.quantity--,u.updateItem(t).then(this.$bvToast.toast("Your item's quantity has been successfully edited.",{title:"Item quantity edited",variant:"success",solid:!0})).catch((function(t){console.log(t),e.refreshInventory()})))},editModal:function(t){this.editedItem=Object(s["a"])({},t)},idFormatter:function(t){return t.slice(0,5).toUpperCase()},checkId:function(t){return 5==t.id.length},checkName:function(t){return t.name.length>=3&&t.name.length<=20},checkQuantity:function(t){return t.quantity>=0&&t.quantity<=32767},checkDetails:function(t){return t.details.length<=140},checkItem:function(t){return""===t.details?!!(this.checkId(t)&&this.checkName(t)&&this.checkQuantity(t))&&(t.details="No details provided.",!0):this.checkId(t)&&this.checkName(t)&&this.checkQuantity(t)&&this.checkDetails(t)},invalidIdFeedback:function(){return"Input the right ID format."},invalidNameFeedback:function(){return"Min. 3 characters, Max. 20 characters."},invalidQuantityFeedback:function(){return"Min. 0, Max. 32767."},invalidDetailsFeedback:function(){return"Max. 140 characters."},resetCreatedItem:function(){this.createdItem.id="",this.createdItem.name="",this.createdItem.quantity=0,this.createdItem.details=""},okCreate:function(){this.checkItem(this.createdItem)&&this.confirmCreate()},okEdit:function(){this.checkItem(this.editedItem)&&this.confirmEdit()},confirmCreate:function(){var t=this;console.log("^^^^^^^^^^^^^"),console.log(this.createdItem),u.postItem(this.createdItem).then(this.$nextTick((function(){t.$bvModal.hide("createModal"),t.$bvToast.toast("Your item has been successfully created.",{title:"Item created",variant:"success",solid:!0}),t.refreshInventory()}))).catch((function(t){console.log(t)}))},confirmEdit:function(){var t=this;u.updateItem(this.editedItem).then(this.$nextTick((function(){t.$bvModal.hide("editModal"),t.$bvToast.toast("Your item has been successfully edited.",{title:"Item edited",variant:"success",solid:!0}),t.refreshInventory()}))).catch((function(t){console.log(t)}))},deleteThisItem:function(t){var e=this;u.deleteItem(t).then(this.$nextTick((function(){e.$bvToast.toast("Your item has been successfully deleted.",{title:"Item deleted",variant:"success",solid:!0}),e.refreshInventory()}))).catch((function(t){console.log(t)}))},refreshInventory:function(){this.getItemsFromServer()},getItemsFromServer:function(){var t=this;this.isBusy=!0,u.getItems().then((function(e){console.log("GET SUCCESS"),t.items=e.data})).catch((function(e){console.log(e),t.$bvToast.toast("An error has occured during load. Please retry.",{title:"Load error",variant:"danger",solid:!0})})).then((function(){t.$refs.inventory.refresh(),t.isBusy=!1}))}}),beforeMount:function(){this.getItemsFromServer()}},f=m,b=(i("9577"),i("2877")),h=Object(b["a"])(f,a,n,!1,null,null,null);e["default"]=h.exports},fb6a:function(t,e,i){"use strict";var a=i("23e7"),n=i("861d"),s=i("e8b5"),r=i("23cb"),o=i("50c4"),c=i("fc6a"),l=i("8418"),d=i("b622"),u=i("1dde"),m=i("ae40"),f=u("slice"),b=m("slice",{ACCESSORS:!0,0:0,1:2}),h=d("species"),p=[].slice,y=Math.max;a({target:"Array",proto:!0,forced:!f||!b},{slice:function(t,e){var i,a,d,u=c(this),m=o(u.length),f=r(t,m),b=r(void 0===e?m:e,m);if(s(u)&&(i=u.constructor,"function"!=typeof i||i!==Array&&!s(i.prototype)?n(i)&&(i=i[h],null===i&&(i=void 0)):i=void 0,i===Array||void 0===i))return p.call(u,f,b);for(a=new(void 0===i?Array:i)(y(b-f,0)),d=0;f<b;f++,d++)f in u&&l(a,d,u[f]);return a.length=d,a}})}}]);
//# sourceMappingURL=chunk-ba4ca246.e6490707.js.map