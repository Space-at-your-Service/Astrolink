(function(e){function t(t){for(var r,a,u=t[0],c=t[1],s=t[2],p=0,l=[];p<u.length;p++)a=u[p],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&l.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);d&&d(t);while(l.length)l.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==i[u]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},i={app:0},o=[];function u(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-04a18e1b":"7bff475e","chunk-073651a2":"8117fd05","chunk-2945bc30":"ab0925f9","chunk-2ca29d5e":"f4cd0835","chunk-2d0b1c72":"d0e0f57e","chunk-2d0d05dc":"b070c37d","chunk-2d0e24e5":"cefb0382","chunk-649dac09":"44d2053e","chunk-6fedeada":"6c35ece3","chunk-9e9c9b90":"5c5cdf13","chunk-0777ba7c":"4af2e6e9","chunk-0c1efb2e":"15c3ee49","chunk-e93c7a2c":"26191557"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-04a18e1b":1,"chunk-073651a2":1,"chunk-2945bc30":1,"chunk-2ca29d5e":1,"chunk-649dac09":1,"chunk-6fedeada":1,"chunk-0777ba7c":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-04a18e1b":"e3c802bb","chunk-073651a2":"e47b0b48","chunk-2945bc30":"9e286dff","chunk-2ca29d5e":"f2943892","chunk-2d0b1c72":"31d6cfe0","chunk-2d0d05dc":"31d6cfe0","chunk-2d0e24e5":"31d6cfe0","chunk-649dac09":"a6d145cc","chunk-6fedeada":"9188ed62","chunk-9e9c9b90":"31d6cfe0","chunk-0777ba7c":"3c113d2c","chunk-0c1efb2e":"31d6cfe0","chunk-e93c7a2c":"31d6cfe0"}[e]+".css",i=c.p+r,o=document.getElementsByTagName("link"),u=0;u<o.length;u++){var s=o[u],p=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(p===r||p===i))return t()}var l=document.getElementsByTagName("style");for(u=0;u<l.length;u++){s=l[u],p=s.getAttribute("data-href");if(p===r||p===i)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var r=t&&t.target&&t.target.src||i,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete a[e],d.parentNode.removeChild(d),n(o)},d.href=i;var f=document.getElementsByTagName("head")[0];f.appendChild(d)})).then((function(){a[e]=0})));var r=i[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=i[e]=[t,n]}));t.push(r[2]=o);var s,p=document.createElement("script");p.charset="utf-8",p.timeout=120,c.nc&&p.setAttribute("nonce",c.nc),p.src=u(e);var l=new Error;s=function(t){p.onerror=p.onload=null,clearTimeout(d);var n=i[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,n[1](l)}i[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:p})}),12e4);p.onerror=p.onload=s,document.head.appendChild(p)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],p=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var d=p;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"414e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"App"},[e.status.loggedIn?n("Nav"):e._e(),n("b-alert",{attrs:{variant:e.alert.variant,dismissible:"",fade:"",show:e.alert.show},on:{dismissed:function(e){return this.$store.dispatch("hideAlert")}}},[e._v(" "+e._s(e.alert.msg)+" ")]),n("router-view"),n("b-overlay",{attrs:{show:e.overlay.show,"no-wrap":"",fixed:"","spinner-variant":"info"},scopedSlots:e._u([{key:"overlay",fn:function(){return[n("div",{staticClass:"text-center"},[e.overlay.img?n("img",{attrs:{src:e.overlay.img,alt:"[Loading]",width:"50px"}}):e._e(),n("br"),n("br"),e.overlay.msg?n("strong",{staticStyle:{"font-size":"large"}},[e._v(e._s(e.overlay.msg))]):e._e(),n("br"),n("br"),e.overlay.hideSpinner?e._e():n("b-spinner",{attrs:{variant:"primary",type:"grow",label:"Spinning"}})],1)]},proxy:!0}])})],1)},i=[],o=n("5530"),u=n("2f62"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-navbar",{staticClass:"bg-white",staticStyle:{"box-shadow":"0px 3px 15px darkred"},attrs:{toggleable:"lg"}},[n("b-navbar-brand",{attrs:{href:"https://astrolink.earth/",target:"_self"}},[n("img",{attrs:{src:"https://i.postimg.cc/2j29FCsF/Astrolink-logo-white.png",alt:"Astrolink",width:"150px"}})]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-text",[e._v(" Alpha Version 0.8 "),n("a",{staticClass:"ml-2",attrs:{href:"https://github.com/Space-at-your-Service/Astrolink/issues",target:"__blank"}},[n("b-icon",{attrs:{id:"bug",icon:"bug-fill"}})],1)])],1),n("b-navbar-nav",{staticClass:"ml-auto"},[e.isAllowed("activities.view_task")?n("b-nav-item",{class:[{active:"flightplan"===e.isActive},"hover-bg-crimson"],attrs:{to:"/flightplan"},on:{click:function(t){e.isActive="flightplan"}}},[e._v("Flightplan")]):e._e(),e.isAllowed("activities.view_procedure")?n("b-nav-item",{class:[{active:"procedures"===e.isActive},"hover-bg-crimson"],attrs:{to:"/procedures"},on:{click:function(t){e.isActive="procedures"}}},[e._v("Procedures")]):e._e(),e.isAllowed("activities.view_experiment")?n("b-nav-item",{class:[{active:"experiments"===e.isActive},"hover-bg-crimson"],attrs:{to:"/experiments"},on:{click:function(t){e.isActive="experiments"}}},[e._v("Experiments")]):e._e(),e.isAllowed("inventory.view_item")?n("b-nav-item",{class:[{active:"inventory"===e.isActive},"hover-bg-crimson"],attrs:{to:"/inventory"},on:{click:function(t){e.isActive="inventory"}}},[e._v("Inventory")]):e._e(),n("b-nav-item-dropdown",{staticClass:"ml-lg-5 hover-bg-grey",attrs:{right:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[n("em",[e._v(e._s(e.username))])]},proxy:!0}])},[n("b-dropdown-item",{staticClass:"text-center",attrs:{to:"/profile"},on:{click:function(t){e.isActive="profile"}}},[n("b-icon",{attrs:{icon:"person-circle"}}),e._v(" "),n("strong",[e._v("Profile")])],1),n("b-dropdown-item",{staticClass:"text-center",attrs:{to:"/planning"},on:{click:function(t){e.isActive="planning"}}},[n("b-icon",{attrs:{icon:"calendar-range"}}),e._v(" "),n("strong",[e._v("Planning")])],1),n("b-dropdown-item",{staticClass:"text-center",on:{click:e.handleLogout}},[n("b-icon",{attrs:{icon:"box-arrow-left"}}),e._v(" "),n("strong",[e._v("Log Out")])],1)],1)],1)],1)],1)},s=[],p={data:function(){return{loading:!1,isActive:""}},computed:Object(o["a"])(Object(o["a"])({},Object(u["d"])("user",["username"])),Object(u["c"])("user",["isAllowed"])),methods:Object(o["a"])(Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(u["b"])(["loadAll","displayOverlay","hideOverlay"])),Object(u["b"])("auth",["logout"])),Object(u["b"])("user",["getUserState"])),{},{handleLogout:function(){this.logout().then(this.$router.push("/login"))}}),mounted:function(){this.$store.dispatch("loadAll")}},l=p,d=(n("a3b5"),n("2877")),f=Object(d["a"])(l,c,s,!1,null,"d8a36984",null),m=f.exports,h={name:"app",components:{Nav:m},computed:Object(o["a"])(Object(o["a"])({},Object(u["d"])(["overlay","alert"])),Object(u["d"])("auth",["status"]))},g=h,v=(n("034f"),Object(d["a"])(g,a,i,!1,null,null,null)),b=v.exports,w=(n("caad"),n("d3b7"),n("8c4f")),y=(n("a15b"),n("d81d"),n("ddb0"),n("96cf"),n("1da1")),S=n("d4ec"),E=n("bee2"),x=n("d929"),k=function(){function e(){Object(S["a"])(this,e)}return Object(E["a"])(e,[{key:"login",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].post("/login/",{username:t.username,password:t.password}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),O=new k,R=sessionStorage.getItem("token"),_=R?{status:{loggedIn:!0}}:{status:{loggedIn:!1}},T={namespaced:!0,state:_,mutations:{LOGIN_SUCCESS:function(e){e.status.loggedIn=!0},LOGOUT:function(e){e.status.loggedIn=!1}},actions:{login:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",O.login(t).then((function(e){var t=e.data.token;t&&(sessionStorage.setItem("token",t),r("LOGIN_SUCCESS"))})));case 2:case"end":return n.stop()}}),n)})))()},logout:function(e){var t=e.commit;sessionStorage.removeItem("token"),t("LOGOUT")}}},j=(n("7db0"),n("c740"),n("c975"),n("a434"),function(){function e(){Object(S["a"])(this,e)}return Object(E["a"])(e,[{key:"getExperiments",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].get("/activities/experiments/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postExperiment",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].post("/activities/experiments/",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateExperiment",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].put("/activities/experiments/"+t.title,t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteExperiment",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].delete("/activities/experiments/"+t.title));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postTextsheet",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].post("/activities/textsheets/",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateTextsheet",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].put("/activities/textsheets/"+t.id,t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),A=new j,C={namespaced:!0,state:{experiments:[],statusOptions:["planned","ongoing","complete","aborted"],defaultExperimentLogo:"https://upload.wikimedia.org/wikipedia/commons/2/2b/Apollo_program_insignia.png"},getters:{getExperimentByTitle:function(e){return function(t){return e.experiments.find((function(e){return e.title===t}))}}},mutations:{SET_STATE:function(e,t){e.experiments=t},CREATE_SUCCESS:function(e,t){var n=Object(o["a"])({},t);e.experiments.push(n)},DELETE_SUCCESS:function(e,t){var n=e.experiments.indexOf(t);n>-1&&e.experiments.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.title,r=e.experiments.findIndex((function(e){return e.title===n}));if(r>-1){var a=Object(o["a"])({},t);e.experiments.splice(r,1,a)}},CREATE_TEXTSHEET_SUCCESS:function(e,t){var n=Object(o["a"])({},t),r=n.experiment,a=e.experiments.find((function(e){return e.title===r})),i=a.data;i.textsheets.push(n)},UPDATE_TEXTSHEET_SUCCESS:function(e,t){var n=Object(o["a"])({},t),r=n.experiment,a=e.experiments.find((function(e){return e.title===r})),i=a.data,u=i.textsheets.findIndex((function(e){return e.title===n.title}));u>-1&&i.textsheets.splice(u,1,n)}},actions:{getExperimentState:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=void 0,t.abrupt("return",A.getExperiments().then((function(e){r=e.data,n("SET_STATE",r),console.log("experiments loaded")})).catch((function(e){throw console.log("loading error (experiments)"),e})));case 3:case"end":return t.stop()}}),t)})))()},createExperiment:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",A.postExperiment(t).then((function(e){r("CREATE_SUCCESS",e.data),console.log("experiment "+t.title+" created")})));case 2:case"end":return n.stop()}}),n)})))()},deleteExperiment:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",A.deleteExperiment(t).then((function(){r("DELETE_SUCCESS",t),console.log("experiment "+t.title+" deleted")})));case 2:case"end":return n.stop()}}),n)})))()},updateExperiment:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",A.updateExperiment(t).then((function(e){r("UPDATE_SUCCESS",e.data),console.log("experiment "+t.title+" updated")})));case 2:case"end":return n.stop()}}),n)})))()},createTextsheet:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",A.postTextsheet(t).then((function(e){var n=e.data;r("CREATE_TEXTSHEET_SUCCESS",n),console.log("textsheet "+t.title+" created for "+t.experiment+" updated")})));case 2:case"end":return n.stop()}}),n)})))()},updateTextsheet:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",A.updateTextsheet(t).then((function(e){var n=e.data;r("UPDATE_TEXTSHEET_SUCCESS",n),console.log("textsheet "+t.title+" updated for "+t.experiment+" updated")})));case 2:case"end":return n.stop()}}),n)})))()}}},P=function(){function e(){Object(S["a"])(this,e)}return Object(E["a"])(e,[{key:"getFlightplan",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].get("/activities/flightplan/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getUserPlanning",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].get("/activities/planning/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postTask",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].post("/activities/planning/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}]),e}(),U=new P,I={namespaced:!0,state:{flightplan:[]},getters:{},mutations:{SET_STATE:function(e,t){e.flightplan=t}},actions:{getFlightplanState:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=void 0,t.abrupt("return",U.getFlightplan().then((function(e){r=e.data,n("SET_STATE",r),console.log("flightplan loaded")})).catch((function(e){throw console.log("loading error (flightplan)"),e})));case 3:case"end":return t.stop()}}),t)})))()}}},L=(n("b0c0"),n("25f0"),function(){function e(){Object(S["a"])(this,e)}return Object(E["a"])(e,[{key:"getItems",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].get("/inventory/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"postItem",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].post("/inventory/",t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"updateItem",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].put("/inventory/"+t.id.toString(),t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteItem",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].delete("/inventory/"+t.id.toString()));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}()),D=new L,F={namespaced:!0,state:{items:[]},getters:{},mutations:{SET_STATE:function(e,t){e.items=t},CREATE_SUCCESS:function(e,t){var n=Object(o["a"])({},t);e.items.push(n)},DELETE_SUCCESS:function(e,t){var n=e.items.indexOf(t);n>-1&&e.items.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.id,r=e.items.findIndex((function(e){return e.id===n}));if(r>-1){e.items.splice(r,1);var a=Object(o["a"])({},t);e.items.push(a)}}},actions:{getInventoryState:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=void 0,t.abrupt("return",D.getItems().then((function(e){r=e.data,n("SET_STATE",r),console.log("inventory loaded")})).catch((function(e){throw console.log("loading error (inventory)"),e})));case 3:case"end":return t.stop()}}),t)})))()},createItem:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",D.postItem(t).then((function(){r("CREATE_SUCCESS",t),console.log("item "+t.name+" created")})));case 2:case"end":return n.stop()}}),n)})))()},deleteItem:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",D.deleteItem(t).then((function(){r("DELETE_SUCCESS",t),console.log("item "+t.name+" deleted")})));case 2:case"end":return n.stop()}}),n)})))()},updateItem:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",D.updateItem(t).then((function(){r("UPDATE_SUCCESS",t),console.log("item "+t.name+" updated")})));case 2:case"end":return n.stop()}}),n)})))()}}},M=(n("4de4"),n("b85c")),N=n("ab5f"),V={namespaced:!0,state:{procedures:[],procedureTypes:[{primaryType:"General",subtypes:["Systems","Hygiene","Cooking","Routine maintenance","Special maintenance"]},{primaryType:"Science",subtypes:["Rover","Space suits","Georemap/App-EVA","Geophysical Exploration","Hydration","MAS","REDMARS","Bioplastic","Crans Psychology","IDUN","Psychology-NASA","Psychology-Mission","Psychology-Design base"]},{primaryType:"MCC",subtypes:["Main"]},{primaryType:"Emergencies",subtypes:["Main"]},{primaryType:"Others",subtypes:["Main"]}],uploadProgress:0},getters:{procedurePrimaryTypes:function(e){var t,n=[],r=Object(M["a"])(e.procedureTypes);try{for(r.s();!(t=r.n()).done;){var a=t.value;n.push(a.primaryType)}}catch(i){r.e(i)}finally{r.f()}return n},proceduresByType:function(e){var t,n=[],r=Object(M["a"])(e.procedureTypes);try{for(r.s();!(t=r.n()).done;){var a,i=t.value,o={type:i.primaryType,subsections:[]},u=e.procedures.filter((function(e){return e.type===i.primaryType})),c=Object(M["a"])(i.subtypes);try{for(c.s();!(a=c.n()).done;){var s=a.value,p=u.filter((function(e){return e.subtype===s})),l={type:s,procedures:p};o.subsections.push(l)}}catch(d){c.e(d)}finally{c.f()}n.push(o)}}catch(d){r.e(d)}finally{r.f()}return n},proceduresAsOptions:function(e,t){var n,r=[],a=t.proceduresByType,i=Object(M["a"])(a);try{for(i.s();!(n=i.n()).done;){var o,u=n.value,c={label:u.type,options:[]},s=Object(M["a"])(u.subsections);try{for(s.s();!(o=s.n()).done;){var p,l=o.value,d=Object(M["a"])(l.procedures);try{for(d.s();!(p=d.n()).done;){var f=p.value;c.options.push({value:f.title,text:"["+l.type+"] "+f.title})}}catch(m){d.e(m)}finally{d.f()}}}catch(m){s.e(m)}finally{s.f()}r.push(c)}}catch(m){i.e(m)}finally{i.f()}return r},findProcedureByTitle:function(e){return function(t){return e.procedures.find((function(e){return e.title===t}))}}},mutations:{SET_STATE:function(e,t){e.procedures=t.procedures},CREATE_SUCCESS:function(e,t){var n=Object(o["a"])({},t);e.procedures.push(n)},DELETE_SUCCESS:function(e,t){var n=e.procedures.indexOf(t);n>-1&&e.procedures.splice(n,1)},UPDATE_SUCCESS:function(e,t){var n=t.title,r=e.procedures.findIndex((function(e){return e.title===n}));if(r>-1){e.procedures.splice(r,1);var a=Object(o["a"])({},t);e.procedures.push(a)}}},actions:{getProcedureState:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r={procedures:[],procedureTypes:[]},t.abrupt("return",N["a"].getProcedures().then((function(e){r.procedures=e.data,n("SET_STATE",r),console.log("procedures loaded")})).catch((function(e){throw console.log(e),"loading error (procedures)"})));case 3:case"end":return t.stop()}}),t)})))()},createProcedure:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,i=new FormData,i.append("title",t.title),i.append("type",t.type),i.append("subtype",t.subtype),i.append("abstract",t.abstract),i.append("pdfFile",t.file),n.abrupt("return",N["a"].postProcedure(i,(function(e){a.uploadProgress=Math.round(100*e.loaded/e.total)})).then((function(){r("CREATE_SUCCESS",t),a.uploadProgress=0,console.log("procedure "+t.title+" created")})));case 8:case"end":return n.stop()}}),n)})))()},deleteProcedure:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,n.abrupt("return",N["a"].deleteProcedure(t).then((function(){r("DELETE_SUCCESS",t),console.log("procedure "+t.title+" deleted")})));case 2:case"end":return n.stop()}}),n)})))()},updateProcedure:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=e.state,i=new FormData,i.append("title",t.title),i.append("type",t.type),i.append("subtype",t.subtype),i.append("abstract",t.abstract),i.append("pdfFile",t.file),n.abrupt("return",N["a"].updateProcedure(i,(function(e){a.uploadProgress=Math.round(100*e.loaded/e.total)})).then((function(){r("UPDATE_SUCCESS",t),a.uploadProgress=0,console.log("procedure "+t.title+" updated")})));case 8:case"end":return n.stop()}}),n)})))()}}},H=(n("07ac"),n("2532"),n("2909")),G=function(){function e(){Object(S["a"])(this,e)}return Object(E["a"])(e,[{key:"getUserProfile",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].get("/asclepios/profile/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"updatePassword",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].put("/asclepios/password/",{oldPassword:t,newPassword:n}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateFavorites",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].put("/asclepios/profile/",{favoriteProcedures:t}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"getUnit",value:function(){var e=Object(y["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",x["a"].get("/asclepios/unit/"+t));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),B=new G,Y={namespaced:!0,state:{username:"",firstName:"",lastName:"",groups:[],permissions:[],favoriteProcedures:[],planning:[]},getters:{rights:function(e){var t=[];for(var n in e.permissions)t.push(n);return t},isAllowed:function(e,t){return function(e){return t.rights.includes(e)}},permissionsReadable:function(e){return Object.values(e.permissions)},favoriteProceduresObjects:function(e,t,n,r){var a,i=[],u=Object(M["a"])(e.favoriteProcedures);try{for(u.s();!(a=u.n()).done;){var c=a.value,s=Object(o["a"])({},r["procedure/findProcedureByTitle"](c));i.push(s)}}catch(p){u.e(p)}finally{u.f()}return i}},mutations:{SET_USER:function(e,t){var n=t;e.username=n.username,e.firstName=n.first_name,e.lastName=n.last_name,e.groups=n.groups,e.permissions=n.permissions,e.favoriteProcedures=n.favoriteProcedures},SET_PLANNING:function(e,t){e.planning=t},ADD_FAV_SUCCESS:function(e,t){e.favoriteProcedures.push(t)},REMOVE_FAV_SUCCESS:function(e,t){var n=e.favoriteProcedures.indexOf(t);n>-1&&e.favoriteProcedures.splice(n,1)},PASSWORD_CHANGED:function(){}},actions:{getUserState:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=void 0,t.abrupt("return",B.getUserProfile().then((function(e){r=e.data,n("SET_USER",r),console.log("user loaded")})).catch((function(e){throw console.log(e),"loading error (user)"})));case 3:case"end":return t.stop()}}),t)})))()},toggleToFavorites:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.commit,a=e.state,i=t.title,o=a.favoriteProcedures.indexOf(i),u=Object(H["a"])(a.favoriteProcedures),-1!==o){n.next=9;break}return u.push(i),n.abrupt("return",B.updateFavorites(u).then((function(){r("ADD_FAV_SUCCESS",i),console.log("procedure "+i+" added to user favorites")})));case 9:return u.splice(o,1),n.abrupt("return",B.updateFavorites(u).then((function(){r("REMOVE_FAV_SUCCESS",i),console.log("procedure "+i+" removed from user favorites")})));case 11:case"end":return n.stop()}}),n)})))()},changePassword:function(e,t){return Object(y["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,a=t.oldPassword,i=t.newPassword,n.abrupt("return",B.updatePassword(a,i).then((function(){r("PASSWORD_CHANGED"),console.log("user password changed")})));case 3:case"end":return n.stop()}}),n)})))()}}};r["default"].use(u["a"]);var $=new u["a"].Store({modules:{auth:T,experiment:C,flightplan:I,inventory:F,procedure:V,user:Y},state:{missionStartDate:new Date(2021,4,15,0,0,0),staff:{astronauts:[],mcc:[],scientists:[]},units:["Astronauts","MCC","Scientists"],overlay:{show:!1,msg:"",img:"",hideSpinner:!1},alert:{show:!1,msg:"",variant:"warning"}},getters:{missionDayNumber:function(e){var t=new Date;return Math.floor((t.getTime()-e.missionStartDate.getTime())/864e5)},astronautsCrew:function(e){return e.staff.astronauts},listUsernames:function(e){return function(t){var n=e.staff[t];return 0===n.length?[]:n.map((function(e){return e.username}))}}},mutations:{SET_STAFF:function(e,t){e.staff=t},SHOW_OVERLAY:function(e,t){e.overlay.show=!0,e.overlay.hideSpinner=t},HIDE_OVERLAY:function(e){e.overlay.show=!1,e.overlay.msg="",e.overlay.img=""},MSG_OVERLAY:function(e,t){e.overlay.msg=t},IMG_OVERLAY:function(e,t){e.overlay.img=t},DISPLAY_ALERT:function(e,t){e.alert.show=!0,e.alert.msg=t.msg,t.variant&&(e.alert.variant=t.variant)},HIDE_ALERT:function(e){e.alert.show=!1,e.alert.msg="",e.alert.variant="warning"}},actions:{loadAll:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.dispatch,r=e.getters,a=[],i=!1,n("displayOverlay",{msg:"Loading USER",img:" https://cdn.onlinewebfonts.com/svg/img_210318.png"}),t.next=6,n("user/getUserState",null,{root:!0}).then(Object(y["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r["user/isAllowed"]("inventory.view_item")){e.next=4;break}return n("displayOverlay",{msg:"Loading INVENTORY",img:"https://cdn.onlinewebfonts.com/svg/img_449535.png"}),e.next=4,n("inventory/getInventoryState",null,{root:!0}).catch((function(e){i=!0,a.push("Inventory"),console.error(e)}));case 4:if(!r["user/isAllowed"]("activities.view_procedure")){e.next=8;break}return n("displayOverlay",{msg:"Loading PROCEDURES",img:"https://cdn.onlinewebfonts.com/svg/img_274798.png"}),e.next=8,n("procedure/getProcedureState",null,{root:!0}).catch((function(e){i=!0,a.push("Procedures"),console.error(e)}));case 8:if(!r["user/isAllowed"]("activities.view_task")){e.next=12;break}return n("displayOverlay",{msg:"Loading FLIGHTPLAN",img:" https://cdn.onlinewebfonts.com/svg/img_563113.png"}),e.next=12,n("flightplan/getFlightplanState",null,{root:!0}).catch((function(e){i=!0,a.push("Flightplan"),console.error(e)}));case 12:if(!r["user/isAllowed"]("activities.view_experiment")){e.next=16;break}return n("displayOverlay",{msg:"Loading EXPERIMENTS",img:" https://cdn.onlinewebfonts.com/svg/img_490832.png"}),e.next=16,n("experiment/getExperimentState",null,{root:!0}).catch((function(e){i=!0,a.push("Experiments"),console.error(e)}));case 16:return n("displayOverlay",{msg:"Loading MISSION MEMBERS",img:"https://cdn.onlinewebfonts.com/svg/img_458814.png"}),e.next=19,n("loadMembers",null,{root:!0}).catch((function(e){i=!0,a.push("Mission members"),console.error(e)}));case 19:n("hideOverlay"),i&&(t="Failed to load the following resources: "+a.join(", "),n("displayAlert",{msg:t,variant:"danger"}));case 21:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e),n("displayOverlay",{msg:"SERVER ERROR: FAILED TO LOAD USER",img:"https://cdn.onlinewebfonts.com/svg/img_505377.png",hideSpinner:!0})}));case 6:case"end":return t.stop()}}),t)})))()},loadMembers:function(e){return Object(y["a"])(regeneratorRuntime.mark((function t(){var n,r,a,i,u,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=e.commit,r=e.state,a=0,i=Object(o["a"])({},r.staff),t.t0=regeneratorRuntime.keys(i);case 4:if((t.t1=t.t0()).done){t.next=12;break}return u=t.t1.value,c=r.units[a],a+=1,t.next=10,B.getUnit(c).then((function(e){i[u]=e.data}));case 10:t.next=4;break;case 12:n("SET_STAFF",i),console.log("mission members loaded");case 14:case"end":return t.stop()}}),t)})))()},displayOverlay:function(e,t){var n=e.commit,r=t.msg,a=t.img,i=t.hideSpinner;n("MSG_OVERLAY",r),n("IMG_OVERLAY",a),n("SHOW_OVERLAY",i)},hideOverlay:function(e){var t=e.commit;t("HIDE_OVERLAY")},displayAlert:function(e,t){var n=e.commit,r=t.msg,a=t.variant;n("DISPLAY_ALERT",{msg:r,variant:a})},hideAlert:function(e){var t=e.commit;t("HIDE_ALERT")}}}),X=$;r["default"].use(w["a"]);var W=function(e,t,n){var r=X.state.auth.status.loggedIn;r?n("/profile"):n()},q=[{path:"/404",name:"404notfound",component:function(){return n.e("chunk-2d0e24e5").then(n.bind(null,"7dac"))}},{path:"*",redirect:"/404"},{path:"/login",alias:"/",name:"login",beforeEnter:W,component:function(){return n.e("chunk-6fedeada").then(n.bind(null,"a55b"))}},{path:"/flightplan",name:"flightplan",component:function(){return n.e("chunk-04a18e1b").then(n.bind(null,"aad6"))}},{path:"/procedures",name:"procedures",component:function(){return Promise.all([n.e("chunk-9e9c9b90"),n.e("chunk-0c1efb2e")]).then(n.bind(null,"2ac9"))}},{path:"/experiments",name:"experiments",component:function(){return n.e("chunk-e93c7a2c").then(n.bind(null,"32c9"))}},{path:"/experiments/:experimentTitle",name:"experiment_details",props:!0,component:function(){return Promise.all([n.e("chunk-9e9c9b90"),n.e("chunk-0777ba7c")]).then(n.bind(null,"1330"))}},{path:"/inventory",name:"inventory",component:function(){return n.e("chunk-2945bc30").then(n.bind(null,"e25f"))}},{path:"/psyforms",name:"psyforms",component:function(){return n.e("chunk-2ca29d5e").then(n.bind(null,"29ed"))}},{path:"/communication",name:"communication",component:function(){return n.e("chunk-2d0b1c72").then(n.bind(null,"20fd"))}},{path:"/experiments/:experimentTitle/data/textsheets/:sheetId",name:"experiment_textdata",props:!0,component:function(){return n.e("chunk-649dac09").then(n.bind(null,"1bc7"))}},{path:"/profile",name:"profile",component:function(){return n.e("chunk-073651a2").then(n.bind(null,"c66d"))}},{path:"/planning",name:"planning",component:function(){return n.e("chunk-2d0d05dc").then(n.bind(null,"6859"))}}],z=new w["a"]({mode:"history",base:"/",routes:q}),J=["/login","/signup"];z.beforeEach((function(e,t,n){var r=!J.includes(e.path),a=X.state.auth.status.loggedIn;r&&!a?n("/login"):n()}));var K=z,Q=(n("5aea"),n("ab8b"),n("2dd8"),n("5f5b")),Z=n("b1e0"),ee=n("7bb1");r["default"].use(Q["a"]),r["default"].use(Z["a"]),r["default"].use(ee["a"],{fieldsBagName:"vvFields"}),r["default"].config.productionTip=!1,new r["default"]({router:K,store:X,render:function(e){return e(b)}}).$mount("#app")},"5aea":function(e,t,n){},"85ec":function(e,t,n){},a3b5:function(e,t,n){"use strict";var r=n("414e"),a=n.n(r);a.a},ab5f:function(e,t,n){"use strict";n("96cf");var r=n("1da1"),a=n("d4ec"),i=n("bee2"),o=n("d929"),u=function(){function e(){Object(a["a"])(this,e)}return Object(i["a"])(e,[{key:"getProcedures",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o["a"].get("/activities/procedures/"));case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()},{key:"getFile",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o["a"].get("/activities/procedures/"+t,{responseType:"blob"}));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"postProcedure",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o["a"].post("/activities/procedures/",t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"updateProcedure",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o["a"].put("/activities/procedures/"+t.get("title"),t,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n}));case 1:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"deleteProcedure",value:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",o["a"].delete("/activities/procedures/"+t.title));case 1:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["a"]=new u},d929:function(e,t,n){"use strict";n("d3b7");var r=n("bc3a"),a=n.n(r),i=a.a.create({baseURL:"http://localhost:8000",timeout:3e3});i.interceptors.request.use((function(e){var t=sessionStorage.getItem("token");return t&&(e.headers.common["Authorization"]="Token "+t),e}),(function(e){return Promise.reject(e)})),t["a"]=i}});
//# sourceMappingURL=app.cd07b2db.js.map